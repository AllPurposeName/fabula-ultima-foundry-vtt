var __getOwnPropNames=Object.getOwnPropertyNames;var __esm=(fn,res)=>function(){return fn&&(res=(0,fn[__getOwnPropNames(fn)[0]])(fn=0)),res};var define_GLOBALPATHS_default,init_define_GLOBALPATHS=__esm({"<define:GLOBALPATHS>"(){define_GLOBALPATHS_default=["systems/fabula-ultima/templates/actor/character/sheets-tabs/classes-tab.hbs","systems/fabula-ultima/templates/actor/character/sheets-tabs/main-tab.hbs","systems/fabula-ultima/templates/actor/character/sheet.hbs","systems/fabula-ultima/templates/item/class/sheet.hbs"]}});var foundry_scripts_exports={};var init_foundry_scripts=__esm({"src/tests/foundry-scripts/index.js"(){init_define_GLOBALPATHS()}});init_define_GLOBALPATHS();init_define_GLOBALPATHS();var FabulaUltima={};FabulaUltima.attributes=["dexterity","insight","might","willpower"];FabulaUltima.characterSubtype={pc:"ACTOR.SUBTYPE.PC",npc:"ACTOR.SUBTYPE.NPC"};FabulaUltima.attributeDice={1:"1d6",2:"1d8",3:"1d10",4:"1d12"};FabulaUltima.conditions=["dazed","enraged","poisoned","shaken","slow","weak"];FabulaUltima.dataSetConfig={en:"dataset-en"};FabulaUltima.i18n={dexterity:"ATTRIBUTE.DEXTERITY",insight:"ATTRIBUTE.WILLPOWER",might:"ATTRIBUTE.MIGHT",willpower:"ATTRIBUTE.INSIGHT"};FabulaUltima.itemTypes=["bond","class"];var config_default=FabulaUltima;init_define_GLOBALPATHS();init_define_GLOBALPATHS();function localizeString(string){string||console.log("No string passed");try{let localeString=CONFIG.fabulaUltima.i18n[string];return localeString||(localeString=string),game.i18n.localize(localeString)}catch(error){return console.log(`Failed to localize string: ${string}. Error: `,error),string}}var FabulaUltimaActor=class extends Actor{get actorProperties(){return this.system}get attributes(){return this.actorProperties.baseAttribute}get dexterity(){return this.modifiedAttribute({baseAttribute:"baseDexterity",possibleStatusEffects:["slow","enraged"]})}get insight(){return this.modifiedAttribute({baseAttribute:"baseInsight",possibleStatusEffects:["dazed","enraged"]})}get might(){return this.modifiedAttribute({baseAttribute:"baseMight",possibleStatusEffects:["weak","poisoned"]})}get willpower(){return this.modifiedAttribute({baseAttribute:"baseWillpower",possibleStatusEffects:["shaken","poisoned"]})}modifiedAttribute({baseAttribute,possibleStatusEffects}){let baseValue=this.actorProperties.baseAttribute[baseAttribute].value,activeStatusEffects=possibleStatusEffects.filter(effect=>this.actorProperties.condition[effect].value).length;return Math.max(6,baseValue-2*activeStatusEffects)}get conditions(){return this.actorProperties.condition}get bio(){return this.actorProperties.bio}};init_define_GLOBALPATHS();init_define_GLOBALPATHS();var FabulaUltimaItem=class extends Item{get itemProperties(){return this.system}};init_define_GLOBALPATHS();function preloadHandlebarsTemplates(){let templatePaths=define_GLOBALPATHS_default;return loadTemplates(templatePaths)}function registerHandlebarsHelpers(){Handlebars.registerHelper("skulls",function(current,max,block){for(var acc="",i=0;i<max;++i)block.data.index=i,block.data.damaged=i>=current,acc+=block.fn(this);return acc}),Handlebars.registerHelper("flps_enrich",function(content){return content=TextEditor.enrichHTML(content,{documents:!0,async:!1}),new Handlebars.SafeString(content)}),Handlebars.registerHelper("flps_capitalize",function(value){return typeof value=="string"&&value.length>0?value[0].toUpperCase()+value.slice(1):value}),Handlebars.registerHelper("flps_strconcat",function(){let args=Array.prototype.slice.call(arguments);return args.pop(),args.join("")}),Handlebars.registerHelper("damageType",function(type){switch(type=normalize(type,"blunt"),type){case"blunt":return game.i18n.localize("ATTACK.BLUNT");case"fear":return game.i18n.localize("ATTACK.FEAR");case"slash":return game.i18n.localize("ATTACK.SLASH");case"stab":return game.i18n.localize("ATTACK.STAB");case"other":return game.i18n.localize("ATTACK.OTHER")}}),Handlebars.registerHelper("armorPart",function(part){switch(part=normalize(part,"body"),part){case"body":return game.i18n.localize("ARMOR.BODY");case"head":return game.i18n.localize("ARMOR.HELMET");case"shield":return game.i18n.localize("ARMOR.SHIELD")}}),Handlebars.registerHelper("itemWeight",function(weight){switch(normalize(weight,"regular")){case"none":return game.i18n.localize("WEIGHT.NONE");case"tiny":return game.i18n.localize("WEIGHT.TINY");case"light":return game.i18n.localize("WEIGHT.LIGHT");case"regular":return game.i18n.localize("WEIGHT.REGULAR");case"heavy":return game.i18n.localize("WEIGHT.HEAVY");default:return weight}}),Handlebars.registerHelper("weaponCategory",function(category){switch(category=normalize(category,"melee"),category){case"melee":return game.i18n.localize("WEAPON.MELEE");case"ranged":return game.i18n.localize("WEAPON.RANGED")}}),Handlebars.registerHelper("weaponGrip",function(grip){switch(grip=normalize(grip,"1h"),grip){case"1h":return game.i18n.localize("WEAPON.1H");case"2h":return game.i18n.localize("WEAPON.2H")}}),Handlebars.registerHelper("weaponRange",function(range){switch(range=normalize(range,"arm"),range){case"arm":return game.i18n.localize("RANGE.ARM");case"near":return game.i18n.localize("RANGE.NEAR");case"short":return game.i18n.localize("RANGE.SHORT");case"long":return game.i18n.localize("RANGE.LONG");case"distant":return game.i18n.localize("RANGE.DISTANT")}}),Handlebars.registerHelper("talentType",function(type){switch(type=normalize(type,"general"),type){case"general":return game.i18n.localize("TALENT.GENERAL");case"kin":return game.i18n.localize("TALENT.KIN");case"profession":return game.i18n.localize("TALENT.PROFESSION")}}),Handlebars.registerHelper("isBroken",function(item){return parseInt(item.system.bonus.max,10)>0&&parseInt(item.system.bonus.value,10)===0?"broken":""}),Handlebars.registerHelper("formatRollModifiers",function(rollModifiers){let output=[];return Object.values(rollModifiers).filter(mod=>!mod.gearBonus).forEach(mod=>{let modName=game.i18n.localize(mod.name);output.push(`${modName} ${mod.value}`)}),output.join(", ")}),Handlebars.registerHelper("hasWeaponFeatures",function(weaponType,features){let meleeFeatures=["edged","pointed","blunt","parry","hook"],rangedFeatures=["slowReload"];if(features.others!=="")return!0;let weaponFeatures=[];weaponType==="melee"?weaponFeatures=meleeFeatures:weaponType==="ranged"&&(weaponFeatures=rangedFeatures);for(let feature in features)if(weaponFeatures.includes(feature)&&features[feature])return!0;return!1}),Handlebars.registerHelper("formatWeaponFeatures",function(weaponType,features){let output=[];return weaponType==="melee"?(features.edged&&output.push(game.i18n.localize("WEAPON.FEATURES.EDGED")),features.pointed&&output.push(game.i18n.localize("WEAPON.FEATURES.POINTED")),features.blunt&&output.push(game.i18n.localize("WEAPON.FEATURES.BLUNT")),features.parrying&&output.push(game.i18n.localize("WEAPON.FEATURES.PARRYING")),features.hook&&output.push(game.i18n.localize("WEAPON.FEATURES.HOOK"))):weaponType==="ranged"?features.slowReload&&output.push(game.i18n.localize("WEAPON.FEATURES.SLOW_RELOAD")):features.others?output.push(features.others):features&&output.push(features),output.join(", ")}),Handlebars.registerHelper("plaintextToHTML",function(value){return new Handlebars.SafeString(value.replace(/(<([^>]+)>)/gi,"").replace(/(?:\r\n|\r|\n)/g,"<br/>"))}),Handlebars.registerHelper("toUpperCase",function(str){return str.toUpperCase()}),Handlebars.registerHelper("eq",function(){let args=Array.prototype.slice.call(arguments,0,-1);return args.every(function(expression){return args[0]===expression})}),Handlebars.registerHelper("or",function(){return Array.prototype.slice.call(arguments,0,-1).reduce((x,y)=>x||y)}),Handlebars.registerHelper("and",function(){return Array.prototype.slice.call(arguments,0,-1).reduce((x,y)=>x&&y)}),Handlebars.registerHelper("chargenLoc",function(item){let localizedString=CONFIG.fbl.i18n[item];return localizedString||(localizedString=`SKILL.${item.toUpperCase().replace(/[\s-]/g,"_")}`),localizedString}),Handlebars.registerHelper("getType",function(item){return typeof(Number(item)||item)}),Handlebars.registerHelper("randomize",items=>items[Math.floor(Math.random()*items.length)]),Handlebars.registerHelper("fblLocalize",function(...args){return args.pop(),localizeString(args.join("."))}),Handlebars.registerHelper("ternary",function(conditional,string1,string2){return conditional?string1:string2}),Handlebars.registerHelper("count",function(array=[]){return Array.isArray(array)?array.length:0})}function normalize(data,defaultValue){return data?data.toLowerCase():defaultValue}var initializeHandlebars=()=>{registerHandlebarsHelpers(),preloadHandlebarsTemplates()};init_define_GLOBALPATHS();init_define_GLOBALPATHS();init_define_GLOBALPATHS();var FabulaUltimaActorSheet=class extends ActorSheet{};var FabulaUltimaCharacterSheet=class extends FabulaUltimaActorSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["fabula-ultima","sheet","actor"],width:660,height:740,resizable:!1,scrollY:[".armors .item-list .items",".critical-injuries .item-list .items",".gears .item-list .items",".spells .item-list .items",".talents .item-list .items",".weapons .item-list .items"],tabs:[{navSelector:".sheet-tabs",contentSelector:".sheet-body",initial:"main"}]})}get template(){return"systems/fabula-ultima/templates/actor/character/sheet.hbs"}async getData(){return await super.getData()}};init_define_GLOBALPATHS();init_define_GLOBALPATHS();var FabulaUltimaItemSheet=class extends ItemSheet{};var FabulaUltimaClassSheet=class extends FabulaUltimaItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["fabula-ultima","sheet","item"],width:660,height:740,resizable:!1})}get template(){return"systems/fabula-ultima/templates/item/class/sheet.hbs"}async getData(){return await super.getData()}};function registerSheets(){Actors.unregisterSheet("core",ActorSheet),Actors.registerSheet("fabula-ultima",FabulaUltimaCharacterSheet,{types:["character"],makeDefault:!0})}Items.registerSheet("fabula-ultima",FabulaUltimaClassSheet,{types:["class"],makeDefault:!0});(async()=>{CONFIG.debug.hooks=!0;let tests=await Promise.resolve().then(()=>(init_foundry_scripts(),foundry_scripts_exports));CONFIG.debug.tests=tests.default,console.warn("HOOKS DEBUG ENABLED: ",CONFIG.debug.hooks)})();Hooks.once("init",()=>{game.fbl={config:config_default},CONFIG.Actor.documentClass=FabulaUltimaActor,CONFIG.fabula=config_default,CONFIG.Item.documentClass=FabulaUltimaItem,registerSheets(),initializeHandlebars()});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiPGRlZmluZTpHTE9CQUxQQVRIUz4iLCAiLi4vc3JjL3Rlc3RzL2ZvdW5kcnktc2NyaXB0cy9pbmRleC5qcyIsICIuLi9zcmMvZmFidWxhLXVsdGltYS5qcyIsICIuLi9zcmMvc3lzdGVtL2NvcmUvY29uZmlnLmpzIiwgIi4uL3NyYy9hY3Rvci9hY3Rvci1kb2N1bWVudC5qcyIsICIuLi9zcmMvdXRpbHMvbG9jYWxpemUtc3RyaW5nLmpzIiwgIi4uL3NyYy9pdGVtL2l0ZW0tZG9jdW1lbnQuanMiLCAiLi4vc3JjL3V0aWxzL29iamVjdC1zZWFyY2guanMiLCAiLi4vc3JjL3N5c3RlbS9jb3JlL2hhbmRsZWJhcnMuanMiLCAiLi4vc3JjL3N5c3RlbS9jb3JlL3NoZWV0cy5qcyIsICIuLi9zcmMvYWN0b3IvY2hhcmFjdGVyL3NoZWV0LmpzIiwgIi4uL3NyYy9hY3Rvci9zaGVldC5qcyIsICIuLi9zcmMvaXRlbS9jbGFzcy9zaGVldC5qcyIsICIuLi9zcmMvaXRlbS9zaGVldC5qcyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiIiwgIiIsICJpbXBvcnQgRmFidWxhQ29uZmlnIGZyb20gXCJAc3lzdGVtL2NvcmUvY29uZmlnLmpzXCI7XG4vLyBpbXBvcnQgeyBGVVJvbGxIYW5kbGVyIH0gZnJvbSBcIkBjb21wb25lbnRzL3JvbGwtZW5naW5lL2VuZ2luZS5qc1wiO1xuaW1wb3J0IHsgRmFidWxhVWx0aW1hQWN0b3IgfSBmcm9tIFwiQGFjdG9yL2FjdG9yLWRvY3VtZW50LmpzXCI7XG5pbXBvcnQgeyBGYWJ1bGFVbHRpbWFJdGVtIH0gZnJvbSBcIkBpdGVtL2l0ZW0tZG9jdW1lbnQuanNcIjtcbmltcG9ydCB7IGluaXRpYWxpemVIYW5kbGViYXJzIH0gZnJvbSBcIkBzeXN0ZW0vY29yZS9oYW5kbGViYXJzLmpzXCI7XG5pbXBvcnQgeyByZWdpc3RlclNoZWV0cyB9IGZyb20gXCJAc3lzdGVtL2NvcmUvc2hlZXRzLmpzXCI7XG4vLyBpbXBvcnQgeyBwb3B1bGF0ZWNsYXNzZXMgfSBmcm9tIFwiQGNvbXBvbnRlbnRzL2NsYXNzZXMtaW1wb3J0ZXIuanNcIjtcblxuLyoqXG4gKiBXZSB1c2UgdGhpcyBsYWJlbCB0byByZW1vdmUgdGhlIGRlYnVnIG9wdGlvbiBpbiBwcm9kdWN0aW9uIGJ1aWxkcy5cbiAqIEBTZWUgcm9sbHVwLmNvbmZpZy5qc1xuICovXG4vKiBAX19QVVJFX18gKi8gKGFzeW5jICgpID0+IHtcbiAgQ09ORklHLmRlYnVnLmhvb2tzID0gdHJ1ZTtcbiAgY29uc3QgdGVzdHMgPSBhd2FpdCBpbXBvcnQoXCIuL3Rlc3RzL2ZvdW5kcnktc2NyaXB0c1wiKTtcbiAgQ09ORklHLmRlYnVnLnRlc3RzID0gdGVzdHMuZGVmYXVsdDtcbiAgY29uc29sZS53YXJuKFwiSE9PS1MgREVCVUcgRU5BQkxFRDogXCIsIENPTkZJRy5kZWJ1Zy5ob29rcyk7XG59KSgpO1xuXG5Ib29rcy5vbmNlKFwiaW5pdFwiLCAoKSA9PiB7XG4gIGdhbWUuZmJsID0ge1xuICAgIGNvbmZpZzogRmFidWxhQ29uZmlnLFxuICB9O1xuICBDT05GSUcuQWN0b3IuZG9jdW1lbnRDbGFzcyA9IEZhYnVsYVVsdGltYUFjdG9yO1xuICBDT05GSUcuZmFidWxhID0gRmFidWxhQ29uZmlnO1xuICBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzID0gRmFidWxhVWx0aW1hSXRlbTtcbiAgLy8gQ09ORklHLkpvdXJuYWxFbnRyeS5kb2N1bWVudENsYXNzID0gRmFidWxhVWx0aW1hSm91cm5hbEVudHJ5O1xuICAvLyBDT05GSUcuQ29tYmF0LmRvY3VtZW50Q2xhc3MgPSBGYWJ1bGFVbHRpbWFDb21iYXQ7XG4gIHJlZ2lzdGVyU2hlZXRzKCk7XG4gIGluaXRpYWxpemVIYW5kbGViYXJzKCk7XG4gIC8vIHBvcHVsYXRlQ2xhc3NlcygpO1xufSlcbiIsICIvKipcbiAqIEBkZXNjcmlwdGlvbiBUaGlzIGFjdHMgYXMgYSBjb25maWd1cmF0aW9uIHV0aWxpdHkgZm9yIHRoZSBzeXN0ZW0uIEV2ZXJ5dGhpbmcgdGhhdCBkb2Vzbid0IG5lZWQgdG8gZ28gaW4gdGVtcGxhdGUuanNvbiwgYnV0IGlzIHN0aWxsIHJlZmVyZW5jZWQgdGhyb3VnaG91dCB0aGUgc3lzdGVtIGlzIGdhdGhlcmVkIGhlcmUuXG4gKi9cblxuY29uc3QgRmFidWxhVWx0aW1hID0ge307XG5cbi8vIEZhYnVsYVVsdGltYS5hY3RpdmVFZmZlY3RzID0ge1xuLy8gXHRjb2xkOiB7XG4vLyBcdFx0XCJmbGFncy5jb3JlLnN0YXR1c0lkXCI6IFwiY29sZFwiLFxuLy8gXHRcdGljb246IFwiaWNvbnMvc3ZnL2Zyb3plbi5zdmdcIixcbi8vIFx0fSxcbi8vIFx0aHVuZ3J5OiB7XG4vLyBcdFx0XCJmbGFncy5jb3JlLnN0YXR1c0lkXCI6IFwiaHVuZ3J5XCIsXG4vLyBcdFx0aWNvbjogXCJpY29ucy9zdmcvc3VuLnN2Z1wiLFxuLy8gXHR9LFxuLy8gXHRzbGVlcHk6IHtcbi8vIFx0XHRcImZsYWdzLmNvcmUuc3RhdHVzSWRcIjogXCJzbGVlcHlcIixcbi8vIFx0XHRpY29uOiBcImljb25zL3N2Zy91bmNvbnNjaW91cy5zdmdcIixcbi8vIFx0fSxcbi8vIFx0dGhpcnN0eToge1xuLy8gXHRcdFwiZmxhZ3MuY29yZS5zdGF0dXNJZFwiOiBcInRoaXJzdHlcIixcbi8vIFx0XHRpY29uOiBcImljb25zL3N2Zy90YW5rYXJkLnN2Z1wiLFxuLy8gXHR9LFxuLy8gfTtcblxuLy8gRmFidWxhVWx0aW1hLmFkdmVudHVyZVNpdGVzID0ge1xuLy8gXHR0YWJsZXM6IHt9LFxuLy8gXHR0cmFuc2Zvcm1lcnM6IHt9LFxuLy8gXHR0eXBlczoge30sXG4vLyBcdHV0aWxpdGllczoge30sXG4vLyB9O1xuXG5GYWJ1bGFVbHRpbWEuYXR0cmlidXRlcyA9IFtcImRleHRlcml0eVwiLCBcImluc2lnaHRcIiwgXCJtaWdodFwiLCBcIndpbGxwb3dlclwiXTtcblxuLy8gRmFidWxhVWx0aW1hLmNhcnJpZWRTdGF0ZXMgPSBbXCJlcXVpcHBlZFwiLCBcImNhcnJpZWRcIl07XG5cbi8vIEZhYnVsYVVsdGltYS5jYXJyaWVkSXRlbVR5cGVzID0gW1wiYXJtb3JcIiwgXCJnZWFyXCIsIFwicmF3TWF0ZXJpYWxcIiwgXCJ3ZWFwb25cIl07XG5cbkZhYnVsYVVsdGltYS5jaGFyYWN0ZXJTdWJ0eXBlID0geyBwYzogXCJBQ1RPUi5TVUJUWVBFLlBDXCIsIG5wYzogXCJBQ1RPUi5TVUJUWVBFLk5QQ1wiIH07XG5cbkZhYnVsYVVsdGltYS5hdHRyaWJ1dGVEaWNlID0ge1xuXHQxOiBcIjFkNlwiLFxuXHQyOiBcIjFkOFwiLFxuXHQzOiBcIjFkMTBcIixcblx0NDogXCIxZDEyXCIsXG59O1xuXG5GYWJ1bGFVbHRpbWEuY29uZGl0aW9ucyA9IFtcImRhemVkXCIsIFwiZW5yYWdlZFwiLCBcInBvaXNvbmVkXCIsIFwic2hha2VuXCIsIFwic2xvd1wiLCBcIndlYWtcIl07XG5cbkZhYnVsYVVsdGltYS5kYXRhU2V0Q29uZmlnID0ge1xuXHRlbjogXCJkYXRhc2V0LWVuXCIsXG59O1xuLy8gXHRcInB0LUJSXCI6IFwiZGF0YXNldC1wdC1iclwiLFxuLy8gXHRlczogXCJkYXRhc2V0LWVzXCIsXG4vLyBcdGZyOiBcImRhdGFzZXQtZnJcIixcbi8vIFx0ZGU6IFwiZGF0YXNldC1kZVwiLFxuLy8gfTtcblxuXG4vLyBGYWJ1bGFVbHRpbWEuZW5yaWNoZWRBY3RvckZpZWxkcyA9IFtcIm5vdGVcIiwgXCJwcmlkZVwiLCBcImZhY2VcIiwgXCJib2R5XCIsIFwiY2xvdGhpbmdcIiwgXCJkYXJrU2VjcmV0XCJdO1xuXG4vLyBGYWJ1bGFVbHRpbWEuZW5yaWNoZWRJdGVtRmllbGRzID0gW1wiZGVzY3JpcHRpb25cIiwgXCJlZmZlY3RcIiwgXCJkcmF3YmFja1wiLCBcImFwcGVhcmFuY2VcIiwgXCJ0b29sc1wiLCBcImZlYXR1cmVzLm90aGVyc1wiXTtcblxuRmFidWxhVWx0aW1hLmkxOG4gPSB7XG4gIGRleHRlcml0eTogXCJBVFRSSUJVVEUuREVYVEVSSVRZXCIsXG4gIGluc2lnaHQ6IFwiQVRUUklCVVRFLldJTExQT1dFUlwiLFxuICBtaWdodDogXCJBVFRSSUJVVEUuTUlHSFRcIixcbiAgd2lsbHBvd2VyOiBcIkFUVFJJQlVURS5JTlNJR0hUXCIsXG59O1xuLy8gXHRhcm1vcjogXCJJVEVNLlR5cGVBcm1vclwiLFxuLy8gXHRnZWFyOiBcIklURU0uVHlwZUdlYXJcIixcbi8vIFx0d2VhcG9uOiBcIklURU0uVHlwZVdlYXBvblwiLFxuLy8gXHRyYXdNYXRlcmlhbDogXCJJVEVNLlR5cGVSYXdtYXRlcmlhbFwiLFxuLy8gXHR0YWxlbnQ6IFwiSVRFTS5UeXBlVGFsZW50XCIsXG4vLyBcdHNwZWxsOiBcIklURU0uVHlwZVNwZWxsXCIsXG4vLyBcdG1vbnN0ZXJBdHRhY2s6IFwiSVRFTS5UeXBlTW9uc3RlcmF0dGFja1wiLFxuLy8gXHRjcml0aWNhbEluanVyeTogXCJJVEVNLlR5cGVDcml0aWNhbGluanVyeVwiLFxuLy8gXHRidWlsZGluZzogXCJJVEVNLlR5cGVCdWlsZGluZ1wiLFxuLy8gXHRoaXJlbGluZzogXCJJVEVNLlR5cGVIaXJlbGluZ1wiLFxuLy8gXHRlbXBhdGh5OiBcIkFUVFJJQlVURS5FTVBBVEhZXCIsXG4vLyBcdHN0cmVuZ3RoOiBcIkFUVFJJQlVURS5TVFJFTkdUSFwiLFxuLy8gXHR3aXRzOiBcIkFUVFJJQlVURS5XSVRTXCIsXG4vLyBcdFwiYW5pbWFsLWhhbmRsaW5nXCI6IFwiU0tJTEwuQU5JTUFMX0hBTkRMSU5HXCIsXG4vLyBcdGNyYWZ0aW5nOiBcIlNLSUxMLkNSQUZUSU5HXCIsXG4vLyBcdGVuZHVyYW5jZTogXCJTS0lMTC5FTkRVUkFOQ0VcIixcbi8vIFx0aGVhbGluZzogXCJTS0lMTC5IRUFMSU5HXCIsXG4vLyBcdGluc2lnaHQ6IFwiU0tJTEwuSU5TSUdIVFwiLFxuLy8gXHRsb3JlOiBcIlNLSUxMLkxPUkVcIixcbi8vIFx0bWFuaXB1bGF0aW9uOiBcIlNLSUxMLk1BTklQVUxBVElPTlwiLFxuLy8gXHRtYXJrc21hbnNoaXA6IFwiU0tJTEwuTUFSS1NNQU5TSElQXCIsXG4vLyBcdG1lbGVlOiBcIlNLSUxMLk1FTEVFXCIsXG4vLyBcdG1pZ2h0OiBcIlNLSUxMLk1JR0hUXCIsXG4vLyBcdG1vdmU6IFwiU0tJTEwuTU9WRVwiLFxuLy8gXHRwZXJmb3JtYW5jZTogXCJTS0lMTC5QRVJGT1JNQU5DRVwiLFxuLy8gXHRzY291dGluZzogXCJTS0lMTC5TQ09VVElOR1wiLFxuLy8gXHRcInNsZWlnaHQtb2YtaGFuZFwiOiBcIlNLSUxMLlNMRUlHSFRfT0ZfSEFORFwiLFxuLy8gXHRzdGVhbHRoOiBcIlNLSUxMLlNURUFMVEhcIixcbi8vIFx0c3Vydml2YWw6IFwiU0tJTEwuU1VSVklWQUxcIixcbi8vIFx0c2xhc2g6IFwiQUNUSU9OLlNMQVNIXCIsXG4vLyBcdHN0YWI6IFwiQUNUSU9OLlNUQUJcIixcbi8vIFx0dW5hcm1lZDogXCJBQ1RJT04uVU5BUk1FRF9TVFJJS0VcIixcbi8vIFx0Z3JhcHBsZTogXCJBQ1RJT04uR1JBUFBMRVwiLFxuLy8gXHRcImJyZWFrLWZyZWVcIjogXCJBQ1RJT04uQlJFQUtfRlJFRVwiLFxuLy8gXHRyYW5nZWQ6IFwiV0VBUE9OLlJBTkdFRFwiLFxuLy8gXHRzaG9vdDogXCJBQ1RJT04uU0hPT1RcIixcbi8vIFx0cGVyc3VhZGU6IFwiQUNUSU9OLlBFUlNVQURFXCIsXG4vLyBcdHRhdW50OiBcIkFDVElPTi5UQVVOVFwiLFxuLy8gXHRmbGVlOiBcIkFDVElPTi5GTEVFXCIsXG4vLyBcdGhlYWw6IFwiQUNUSU9OLkhFQUxcIixcbi8vIFx0ZG9kZ2U6IFwiQUNUSU9OLkRPREdFXCIsXG4vLyBcdHBhcnJ5OiBcIkFDVElPTi5QQVJSWVwiLFxuLy8gXHRzaG92ZTogXCJBQ1RJT04uU0hPVkVcIixcbi8vIFx0ZGlzYXJtOiBcIkFDVElPTi5ESVNBUk1cIixcbi8vIFx0cnVuOiBcIkFDVElPTi5SVU5cIixcbi8vIFx0cmV0cmVhdDogXCJBQ1RJT04uUkVUUkVBVFwiLFxuLy8gXHRcImdyYXBwbGUtYXR0YWNrXCI6IFwiQUNUSU9OLkdSQVBQTEVfQVRUQUNLXCIsXG4vLyBcdHNwZWxsczogXCJNQUdJQy5TUEVMTFNcIixcbi8vIFx0YWN0aXZhdGVkVGFsZW50czogXCJUQUxFTlQuQU5ZX0FDVElWQVRFRFwiLFxuLy8gXHRcInRyYXZlbC1mb3JjZWQtbWFyY2hcIjogXCJGTFBTLlRSQVZFTF9ST0xMLkZPUkNFRF9NQVJDSFwiLFxuLy8gXHRcInRyYXZlbC1uYXZpZ2F0ZVwiOiBcIkZMUFMuVFJBVkVMX1JPTEwuTkFWSUdBVEVcIixcbi8vIFx0XCJ0cmF2ZWwta2VlcC13YXRjaFwiOiBcIkZMUFMuVFJBVkVMX1JPTEwuS0VFUF9XQVRDSFwiLFxuLy8gXHRcInRyYXZlbC1maW5kLWdvb2QtcGxhY2VcIjogXCJGTFBTLlRSQVZFTF9ST0xMLkZJTkRfR09PRF9QTEFDRVwiLFxuLy8gXHRcInRyYXZlbC1maW5kLWZvb2RcIjogXCJGTFBTLlRSQVZFTF9ST0xMLkZJTkRfRk9PRFwiLFxuLy8gXHRcInRyYXZlbC1maW5kLXByZXlcIjogXCJGTFBTLlRSQVZFTF9ST0xMLkZJTkRfUFJFWVwiLFxuLy8gXHRcInRyYXZlbC1oaWtlLWluLWRhcmtuZXNzXCI6IFwiRkxQUy5UUkFWRUxfUk9MTC5ISUtFX0lOX0RBUktORVNTXCIsXG4vLyBcdFwidHJhdmVsLWtpbGwtcHJleVwiOiBcIkZMUFMuVFJBVkVMX1JPTEwuS0lMTF9QUkVZXCIsXG4vLyBcdFwidHJhdmVsLWNhdGNoLWZpc2hcIjogXCJGTFBTLlRSQVZFTF9ST0xMLkNBVENIX0ZJU0hcIixcbi8vIFx0XCJ0cmF2ZWwtbWFrZS1jYW1wXCI6IFwiRkxQUy5UUkFWRUxfUk9MTC5NQUtFX0NBTVBcIixcbi8vIFx0Y2FycnlpbmdDYXBhY2l0eTogXCJDQVJSWUlOR19DQVBBQ0lUWVwiLFxuLy8gXHRcImRhcmstZm9yZXN0XCI6IFwiQklPTUUuREFSS19GT1JFU1RcIixcbi8vIFx0Zm9yZXN0OiBcIkJJT01FLkZPUkVTVFwiLFxuLy8gXHRoaWxsczogXCJCSU9NRS5ISUxMU1wiLFxuLy8gXHRsYWtlOiBcIkJJT01FLkxBS0VcIixcbi8vIFx0bWFyc2hsYW5kczogXCJCSU9NRS5NQVJTSExBTkRTXCIsXG4vLyBcdG1vdW50YWluczogXCJCSU9NRS5NT1VOVEFJTlNcIixcbi8vIFx0cGxhaW5zOiBcIkJJT01FLlBMQUlOU1wiLFxuLy8gXHRxdWFnbWlyZTogXCJCSU9NRS5RVUFHTUlSRVwiLFxuLy8gXHRydWluczogXCJCSU9NRS5SVUlOU1wiLFxuLy8gXHRcImJlbmVhdGgtdGhlLWljZVwiOiBcIkJJT01FLkJFTkVBVEhfVEhFX0lDRVwiLFxuLy8gXHRcImljZS1jYXBcIjogXCJCSU9NRS5JQ0VfQ0FQXCIsXG4vLyBcdFwiaWNlLWZvcmVzdFwiOiBcIkJJT01FLklDRV9GT1JFU1RcIixcbi8vIFx0XCJzZWEtaWNlXCI6IFwiQklPTUUuU0VBX0lDRVwiLFxuLy8gXHR0dW5kcmE6IFwiQklPTUUuVFVORFJBXCIsXG4vLyBcdFwiY3JpbXNvbi1mb3Jlc3RcIjogXCJCSU9NRS5DUklNU09OX0ZPUkVTVFwiLFxuLy8gXHRhc2hsYW5kczogXCJCSU9NRS5BU0hMQU5EU1wiLFxuLy8gXHRvY2VhbjogXCJCSU9NRS5PQ0VBTlwiLFxuLy8gXHRmaXJlbGFuZHM6IFwiQklPTUUuRklSRUxBTkRTXCIsXG4vLyB9O1xuXG5GYWJ1bGFVbHRpbWEuaXRlbVR5cGVzID0gW1xuICBcImJvbmRcIixcbiAgXCJjbGFzc1wiXG5dO1xuXG4vLyBGYWJ1bGFVbHRpbWEuZW5jb3VudGVyVGFibGVzID0gW1xuLy8gXHRcImRhcmstZm9yZXN0XCIsXG4vLyBcdFwiZm9yZXN0XCIsXG4vLyBcdFwiaGlsbHNcIixcbi8vIFx0XCJsYWtlXCIsXG4vLyBcdFwibWFyc2hsYW5kc1wiLFxuLy8gXHRcIm1vdW50YWluc1wiLFxuLy8gXHRcInBsYWluc1wiLFxuLy8gXHRcInF1YWdtaXJlXCIsXG4vLyBcdFwicnVpbnNcIixcbi8vIFx0XCJiZW5lYXRoLXRoZS1pY2VcIixcbi8vIFx0XCJpY2UtY2FwXCIsXG4vLyBcdFwiaWNlLWZvcmVzdFwiLFxuLy8gXHRcInNlYS1pY2VcIixcbi8vIFx0XCJ0dW5kcmFcIixcbi8vIFx0XCJvY2VhblwiLFxuLy8gXHRcImZpcmVsYW5kc1wiLFxuLy8gXHRcImNyaW1zb24tZm9yZXN0XCIsXG4vLyBcdFwiYXNobGFuZHNcIixcbi8vIF07XG5cbi8vIEZhYnVsYVVsdGltYS5vdGhlclRhYmxlcyA9IFtcInRyYXZlbC1maW5kLXByZXlcIl07XG5cbi8vIEZhYnVsYVVsdGltYS5za2lsbEF0dHJpYnV0ZU1hcCA9IHtcbi8vIFx0XCJhbmltYWwtaGFuZGxpbmdcIjogXCJlbXBhdGh5XCIsXG4vLyBcdGNyYWZ0aW5nOiBcInN0cmVuZ3RoXCIsXG4vLyBcdGVuZHVyYW5jZTogXCJzdHJlbmd0aFwiLFxuLy8gXHRoZWFsaW5nOiBcImVtcGF0aHlcIixcbi8vIFx0aW5zaWdodDogXCJ3aXRzXCIsXG4vLyBcdGxvcmU6IFwid2l0c1wiLFxuLy8gXHRtYW5pcHVsYXRpb246IFwiZW1wYXRoeVwiLFxuLy8gXHRtYXJrc21hbnNoaXA6IFwiYWdpbGl0eVwiLFxuLy8gXHRtZWxlZTogXCJzdHJlbmd0aFwiLFxuLy8gXHRtaWdodDogXCJzdHJlbmd0aFwiLFxuLy8gXHRtb3ZlOiBcImFnaWxpdHlcIixcbi8vIFx0cGVyZm9ybWFuY2U6IFwiZW1wYXRoeVwiLFxuLy8gXHRzY291dGluZzogXCJ3aXRzXCIsXG4vLyBcdFwic2xlaWdodC1vZi1oYW5kXCI6IFwiYWdpbGl0eVwiLFxuLy8gXHRzdGVhbHRoOiBcImFnaWxpdHlcIixcbi8vIFx0c3Vydml2YWw6IFwid2l0c1wiLFxuLy8gfTtcblxuLy8gRmFidWxhVWx0aW1hLndlYXBvbkZlYXR1cmVzID0gW1wiYmx1bnRcIiwgXCJlZGdlZFwiLCBcImhvb2tcIiwgXCJwYXJyeWluZ1wiLCBcInNoaWVsZFwiLCBcInBvaW50ZWRcIiwgXCJzbG93UmVsb2FkXCJdO1xuXG4vLyBleHBvcnQgY29uc3QgbW9kaWZ5Q29uZmlnID0gKCkgPT4ge1xuLy8gXHRjb25zdCBzZXR0aW5ncyA9IFtcIm1heEluaXRcIl07XG4vLyBcdGZvciAoY29uc3Qgc2V0dGluZyBvZiBzZXR0aW5ncykge1xuLy8gXHRcdGNvbnN0IHZhbHVlID0gZ2FtZS5zZXR0aW5ncy5nZXQoXCJmYWJ1bGEtdWx0aW1hXCIsIHNldHRpbmcpO1xuLy8gXHRcdGlmICh2YWx1ZSkge1xuLy8gXHRcdFx0RmFidWxhVWx0aW1hW3NldHRpbmddID0gdmFsdWU7XG4vLyBcdFx0fVxuLy8gXHR9XG4vLyB9O1xuZXhwb3J0IGRlZmF1bHQgRmFidWxhVWx0aW1hO1xuIiwgImltcG9ydCBsb2NhbGl6ZSBmcm9tIFwiQHV0aWxzL2xvY2FsaXplLXN0cmluZy5qc1wiO1xuXG5leHBvcnQgY2xhc3MgRmFidWxhVWx0aW1hQWN0b3IgZXh0ZW5kcyBBY3RvciB7XG5cdGdldCBhY3RvclByb3BlcnRpZXMoKSB7XG5cdFx0cmV0dXJuIHRoaXMuc3lzdGVtO1xuXHR9XG5cblx0Z2V0IGF0dHJpYnV0ZXMoKSB7XG5cdFx0cmV0dXJuIHRoaXMuYWN0b3JQcm9wZXJ0aWVzLmJhc2VBdHRyaWJ1dGU7XG5cdH1cblxuICBnZXQgZGV4dGVyaXR5KCkge1xuICAgIHJldHVybiB0aGlzLm1vZGlmaWVkQXR0cmlidXRlKHtiYXNlQXR0cmlidXRlOiBcImJhc2VEZXh0ZXJpdHlcIiwgcG9zc2libGVTdGF0dXNFZmZlY3RzOiBbXCJzbG93XCIsIFwiZW5yYWdlZFwiXX0pO1xuICB9XG5cbiAgZ2V0IGluc2lnaHQoKSB7XG4gICAgcmV0dXJuIHRoaXMubW9kaWZpZWRBdHRyaWJ1dGUoe2Jhc2VBdHRyaWJ1dGU6IFwiYmFzZUluc2lnaHRcIiwgcG9zc2libGVTdGF0dXNFZmZlY3RzOiBbXCJkYXplZFwiLCBcImVucmFnZWRcIl19KTtcbiAgfVxuXG4gIGdldCBtaWdodCgpIHtcbiAgICByZXR1cm4gdGhpcy5tb2RpZmllZEF0dHJpYnV0ZSh7YmFzZUF0dHJpYnV0ZTogXCJiYXNlTWlnaHRcIiwgcG9zc2libGVTdGF0dXNFZmZlY3RzOiBbXCJ3ZWFrXCIsIFwicG9pc29uZWRcIl19KTtcbiAgfVxuXG4gIGdldCB3aWxscG93ZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMubW9kaWZpZWRBdHRyaWJ1dGUoe2Jhc2VBdHRyaWJ1dGU6IFwiYmFzZVdpbGxwb3dlclwiLCBwb3NzaWJsZVN0YXR1c0VmZmVjdHM6IFtcInNoYWtlblwiLCBcInBvaXNvbmVkXCJdfSk7XG4gIH1cblxuICBtb2RpZmllZEF0dHJpYnV0ZSh7YmFzZUF0dHJpYnV0ZSwgcG9zc2libGVTdGF0dXNFZmZlY3RzfSkge1xuICAgIGNvbnN0IGJhc2VWYWx1ZSA9IHRoaXMuYWN0b3JQcm9wZXJ0aWVzLmJhc2VBdHRyaWJ1dGVbYmFzZUF0dHJpYnV0ZV0udmFsdWU7XG4gICAgY29uc3QgYWN0aXZlU3RhdHVzRWZmZWN0cyA9IHBvc3NpYmxlU3RhdHVzRWZmZWN0cy5maWx0ZXIoKGVmZmVjdCkgPT4gdGhpcy5hY3RvclByb3BlcnRpZXMuY29uZGl0aW9uW2VmZmVjdF0udmFsdWUpLmxlbmd0aDtcbiAgICByZXR1cm4gTWF0aC5tYXgoNiwgYmFzZVZhbHVlIC0gKDIgKiBhY3RpdmVTdGF0dXNFZmZlY3RzKSk7XG4gIH1cblxuXHRnZXQgY29uZGl0aW9ucygpIHtcblx0XHRyZXR1cm4gdGhpcy5hY3RvclByb3BlcnRpZXMuY29uZGl0aW9uO1xuXHR9XG5cbiAgZ2V0IGJpbygpIHtcbiAgICByZXR1cm4gdGhpcy5hY3RvclByb3BlcnRpZXMuYmlvO1xuICB9XG4vL1xuLy8gXHRnZXQgY29uc3VtYWJsZXMoKSB7XG4vLyBcdFx0cmV0dXJuIHRoaXMuYWN0b3JQcm9wZXJ0aWVzLmNvbnN1bWFibGU7XG4vLyBcdH1cbi8vXG4vLyBcdGdldCBjYW5BY3QoKSB7XG4vLyBcdFx0aWYgKCF0aGlzLmF0dHJpYnV0ZXMpIHJldHVybiBmYWxzZTtcbi8vIFx0XHRyZXR1cm4gT2JqZWN0LmVudHJpZXModGhpcy5hdHRyaWJ1dGVzKS5ldmVyeShcbi8vIFx0XHRcdChba2V5LCBhdHRyaWJ1dGVdKSA9PiBhdHRyaWJ1dGUudmFsdWUgPiAwIHx8IGF0dHJpYnV0ZS5tYXggPD0gMCB8fCBrZXkgPT09IFwiZW1wYXRoeVwiLFxuLy8gXHRcdCk7XG4vLyBcdH1cbi8vXG4vLyBcdGdldCBza2lsbHMoKSB7XG4vLyBcdFx0cmV0dXJuIHRoaXMuYWN0b3JQcm9wZXJ0aWVzLnNraWxsO1xuLy8gXHR9XG4vL1xuLy8gXHRnZXQgd2lsbHBvd2VyKCkge1xuLy8gXHRcdHJldHVybiB0aGlzLmFjdG9yUHJvcGVydGllcy5iaW8/LndpbGxwb3dlcjtcbi8vIFx0fVxuLy9cbi8vIFx0Z2V0IHVubGltaXRlZFB1c2goKSB7XG4vLyBcdFx0cmV0dXJuIHRoaXMuZ2V0RmxhZyhcImZhYnVsYS11bHRpbWFcIiwgXCJ1bmxpbWl0ZWRQdXNoXCIpID8/IGZhbHNlO1xuLy8gXHR9XG4vL1xuLy8gXHQvKiBPdmVycmlkZSAqL1xuLy8gXHRnZXRSb2xsRGF0YSgpIHtcbi8vIFx0XHRyZXR1cm4ge1xuLy8gXHRcdFx0YWxpYXM6IHRoaXMudG9rZW4/Lm5hbWUgfHwgdGhpcy5uYW1lLFxuLy8gXHRcdFx0YWN0b3JJZDogdGhpcy5pZCxcbi8vIFx0XHRcdGFjdG9yVHlwZTogdGhpcy50eXBlLFxuLy8gXHRcdFx0Y2FuQWN0OiB0aGlzLmNhbkFjdCxcbi8vIFx0XHRcdHNjZW5lSWQ6IHRoaXMudG9rZW4/LnBhcmVudC5pZCxcbi8vIFx0XHRcdHRva2VuSWQ6IHRoaXMudG9rZW4/LmlkLFxuLy8gXHRcdFx0dW5saW1pdGVkUHVzaDogdGhpcy51bmxpbWl0ZWRQdXNoLFxuLy8gXHRcdH07XG4vLyBcdH1cbi8vXG4vLyBcdGdldFJvbGxNb2RpZmllck9wdGlvbnMoLi4ucm9sbElkZW50aWZpZXJzKSB7XG4vLyBcdFx0aWYgKCFyb2xsSWRlbnRpZmllcnMubGVuZ3RoKSByZXR1cm4gW107XG4vLyBcdFx0Y29uc3QgaXRlbU1vZGlmaWVycyA9IHRoaXMuaXRlbXMucmVkdWNlKChhcnJheSwgaXRlbSkgPT4ge1xuLy8gXHRcdFx0Y29uc3QgbW9kaWZpZXJzID0gaXRlbS5nZXRSb2xsTW9kaWZpZXIoLi4ucm9sbElkZW50aWZpZXJzKTtcbi8vIFx0XHRcdGlmIChtb2RpZmllcnMpIGFycmF5ID0gWy4uLmFycmF5LCAuLi5tb2RpZmllcnNdO1xuLy8gXHRcdFx0cmV0dXJuIGFycmF5O1xuLy8gXHRcdH0sIFtdKTtcbi8vIFx0XHRpZiAocm9sbElkZW50aWZpZXJzLmluY2x1ZGVzKFwiZG9kZ2VcIikpIHtcbi8vIFx0XHRcdGl0ZW1Nb2RpZmllcnMucHVzaCh7XG4vLyBcdFx0XHRcdG5hbWU6IGxvY2FsaXplKFwiUk9MTC5TVEFORElOR19ET0RHRVwiKSxcbi8vIFx0XHRcdFx0dmFsdWU6IC0yLFxuLy8gXHRcdFx0XHRhY3RpdmU6IHRydWUsXG4vLyBcdFx0XHR9KTtcbi8vIFx0XHRcdGl0ZW1Nb2RpZmllcnMucHVzaCh7XG4vLyBcdFx0XHRcdG5hbWU6IGxvY2FsaXplKFwiUk9MTC5ET0RHRV9TTEFTSFwiKSxcbi8vIFx0XHRcdFx0dmFsdWU6ICsyLFxuLy8gXHRcdFx0fSk7XG4vLyBcdFx0fVxuLy8gXHRcdHJldHVybiBpdGVtTW9kaWZpZXJzO1xuLy8gXHR9XG4vL1xuLy8gXHRhc3luYyBjcmVhdGVFbWJlZGRlZERvY3VtZW50cyhlbWJlZGRlZE5hbWUsIGRhdGEsIG9wdGlvbnMpIHtcbi8vIFx0XHQvLyBSZXBsYWNlIHJhbmRvbWl6ZWQgSXRlbS5wcm9wZXJ0aWVzIGxpa2UgXCJbW2Q2XV0gZGF5c1wiIHdpdGggYSByb2xsXG4vLyBcdFx0bGV0IG5ld0RhdGEgPSBkZWVwQ2xvbmUoZGF0YSk7XG4vLyBcdFx0aWYgKCFBcnJheS5pc0FycmF5KG5ld0RhdGEpKSBuZXdEYXRhID0gW25ld0RhdGFdOyAvLyBTbWFsbCB0ZWNobmljYWwgZGVidC4gRHVyaW5nIHJlZGVzaWduIG9mIE5QQyBzaGVldCBjcmVhdGVFbWJlZGRlZERvY3VtZW50cyBuZWVkcyB0byBiZSBwYXNzZWQgYW4gYXJyYXkuXG4vLyBcdFx0Y29uc3QgaW5saW5lUm9sbCA9IC9cXFtcXFsoW2RcXGQrXFwtKl0rKVxcXVxcXS9pO1xuLy8gXHRcdGNvbnN0IGNyZWF0ZVJvbGwgPSBhc3luYyAoW19tYXRjaCwgZ3JvdXBdKSA9PiB7XG4vLyBcdFx0XHRjb25zdCByb2xsID0gYXdhaXQgbmV3IFJvbGwoZ3JvdXApLnJvbGwoKTtcbi8vIFx0XHRcdHJldHVybiByb2xsLnRvdGFsO1xuLy8gXHRcdH07XG4vLyBcdFx0Zm9yIGF3YWl0IChjb25zdCBlbnRpdHkgb2YgbmV3RGF0YSkge1xuLy8gXHRcdFx0aWYgKGVudGl0eS5kYXRhKSB7XG4vLyBcdFx0XHRcdGVudGl0eS5kYXRhID0gYXdhaXQgT2JqZWN0LmVudHJpZXMoZW50aXR5LmRhdGEpLnJlZHVjZShhc3luYyAob2JqLCBba2V5LCB2YWx1ZV0pID0+IHtcbi8vIFx0XHRcdFx0XHRpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHZhbHVlLm1hdGNoKGlubGluZVJvbGwpKSB7XG4vLyBcdFx0XHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVSb2xsKGlubGluZVJvbGwuZXhlYyh2YWx1ZSkpO1xuLy8gXHRcdFx0XHRcdFx0dmFsdWUgPSB2YWx1ZS5yZXBsYWNlKGlubGluZVJvbGwsIHJlc3VsdCk7XG4vLyBcdFx0XHRcdFx0fVxuLy8gXHRcdFx0XHRcdGNvbnN0IHJlc29sdmVkID0gYXdhaXQgb2JqO1xuLy8gXHRcdFx0XHRcdHJldHVybiB7IC4uLnJlc29sdmVkLCBba2V5XTogdmFsdWUgfTtcbi8vIFx0XHRcdFx0fSwge30pO1xuLy9cbi8vIFx0XHRcdFx0Ly8gV2Ugb25seSB3YW50IHRvIHRvdWNoIGZsYWdzIG9mIGl0ZW1zIHRoYXQgYXJlIGNvbnNpZGVyZWQgXCJnZWFyXCJcbi8vIFx0XHRcdFx0aWYgKCFDT05GSUcuZmJsLmNhcnJpZWRJdGVtVHlwZXMuaW5jbHVkZXMoZGF0YS50eXBlKSkgY29udGludWU7XG4vLyBcdFx0XHRcdGVudGl0eS5mbGFnc1tcImZhYnVsYS11bHRpbWFcIl0gPSB7XG4vLyBcdFx0XHRcdFx0c3RhdGU6IFwiY2FycmllZFwiLFxuLy8gXHRcdFx0XHRcdC4uLmVudGl0eS5mbGFnc1tcImZhYnVsYS11bHRpbWFcIl0sXG4vLyBcdFx0XHRcdH07XG4vLyBcdFx0XHR9XG4vLyBcdFx0fVxuLy9cbi8vIFx0XHRyZXR1cm4gc3VwZXIuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoZW1iZWRkZWROYW1lLCBuZXdEYXRhLCBvcHRpb25zKTtcbi8vIFx0fVxuLy9cbi8vIFx0LyoqXG4vLyBcdCAqIE92ZXJyaWRlIGluaXRpYWxpemluZyBhIGNoYXJhY3RlciB0byBzZXQgZGVmYXVsdCBwb3J0cmFpdHMuXG4vLyBcdCAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhIG9iamVjdCBvZiBhbiBpbml0aWFsaXplZCBjaGFyYWN0ZXIuXG4vLyBcdCAqIEBwYXJhbSB7b2JqZWN0P30gb3B0aW9ucyBvcHRpb25hbCBvYmplY3Qgb2Ygb3B0aW9ucy5cbi8vIFx0ICovXG4vLyBcdHN0YXRpYyBhc3luYyBjcmVhdGUoZGF0YSwgb3B0aW9ucykge1xuLy8gXHRcdGlmICghZGF0YS5pbWcpIHtcbi8vIFx0XHRcdHN3aXRjaCAoZGF0YS50eXBlKSB7XG4vLyBcdFx0XHRcdGNhc2UgXCJwYXJ0eVwiOlxuLy8gXHRcdFx0XHRcdGRhdGEuaW1nID0gXCJzeXN0ZW1zL2ZhYnVsYS11bHRpbWEvYXNzZXRzL2ZibC1zdW4ud2VicFwiO1xuLy8gXHRcdFx0XHRcdGJyZWFrO1xuLy8gXHRcdFx0XHRkZWZhdWx0OlxuLy8gXHRcdFx0XHRcdGRhdGEuaW1nID0gYHN5c3RlbXMvZmFidWxhLXVsdGltYS9hc3NldHMvZmJsLSR7ZGF0YS50eXBlfS53ZWJwYDtcbi8vIFx0XHRcdFx0XHRicmVhaztcbi8vIFx0XHRcdH1cbi8vIFx0XHR9XG4vLyBcdFx0c3VwZXIuY3JlYXRlKGRhdGEsIG9wdGlvbnMpO1xuLy8gXHR9XG4vL1xuLy8gXHR0b2dnbGVDb25kaXRpb24oY29uZGl0aW9uTmFtZSkge1xuLy8gXHRcdGNvbnN0IGNvbmRpdGlvblZhbHVlID0gdGhpcy5jb25kaXRpb25zW2NvbmRpdGlvbk5hbWVdLnZhbHVlO1xuLy8gXHRcdGNvbnN0IGNvbmRpdGlvbkxhYmVsID0gdGhpcy5jb25kaXRpb25zW2NvbmRpdGlvbk5hbWVdLmxhYmVsO1xuLy8gXHRcdGNvbnN0IGVmZmVjdCA9IHRoaXMuZWZmZWN0cy5maW5kKChjb25kaXRpb24pID0+IGNvbmRpdGlvbi5nZXRGbGFnKFwiY29yZVwiLCBcInN0YXR1c0lkXCIpID09PSBjb25kaXRpb25OYW1lKTtcbi8vIFx0XHRpZiAoQ09ORklHLmZibC5jb25kaXRpb25zLmluY2x1ZGVzKGNvbmRpdGlvbk5hbWUpKSB7XG4vLyBcdFx0XHR0aGlzLnVwZGF0ZSh7IFtgc3lzdGVtLmNvbmRpdGlvbi4ke2NvbmRpdGlvbk5hbWV9LnZhbHVlYF06ICFjb25kaXRpb25WYWx1ZSB9KTtcbi8vIFx0XHRcdGlmIChjb25kaXRpb25WYWx1ZSAmJiBlZmZlY3QpIHRoaXMuZGVsZXRlRW1iZWRkZWREb2N1bWVudHMoXCJBY3RpdmVFZmZlY3RcIiwgW2VmZmVjdC5pZF0pO1xuLy8gXHRcdFx0ZWxzZSBpZiAoIWNvbmRpdGlvblZhbHVlICYmICFlZmZlY3QpXG4vLyBcdFx0XHRcdHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoXCJBY3RpdmVFZmZlY3RcIiwge1xuLy8gXHRcdFx0XHRcdC4uLkNPTkZJRy5mYmwuYWN0aXZlRWZmZWN0c1tjb25kaXRpb25OYW1lXSxcbi8vIFx0XHRcdFx0XHRsYWJlbDogbG9jYWxpemUoY29uZGl0aW9uTGFiZWwpLFxuLy8gXHRcdFx0XHR9KTtcbi8vIFx0XHR9XG4vLyBcdH1cbi8vXG4vLyBcdHJlc3QoKSB7XG4vLyBcdFx0Y29uc3QgYWN0aXZlQ29uZGl0aW9ucyA9IE9iamVjdC5lbnRyaWVzKHRoaXMuY29uZGl0aW9ucyA/PyB7fSkuZmlsdGVyKChbXywgdmFsdWVdKSA9PiB2YWx1ZT8udmFsdWUpO1xuLy8gXHRcdGNvbnN0IGlzQmxvY2tlZCA9ICguLi5jb25kaXRpb25zKSA9PlxuLy8gXHRcdFx0Y29uZGl0aW9ucy5zb21lKChjb25kaXRpb24pID0+IGFjdGl2ZUNvbmRpdGlvbnMubWFwKChba2V5LCBfXSkgPT4ga2V5KS5pbmNsdWRlcyhjb25kaXRpb24pKTtcbi8vIFx0XHRjb25zdCBkYXRhID0ge1xuLy8gXHRcdFx0YXR0cmlidXRlOiB7XG4vLyBcdFx0XHRcdGFnaWxpdHk6IHtcbi8vIFx0XHRcdFx0XHR2YWx1ZTogaXNCbG9ja2VkKFwidGhpcnN0eVwiKSA/IHRoaXMuYXR0cmlidXRlcy5hZ2lsaXR5LnZhbHVlIDogdGhpcy5hdHRyaWJ1dGVzLmFnaWxpdHkubWF4LFxuLy8gXHRcdFx0XHR9LFxuLy8gXHRcdFx0XHRzdHJlbmd0aDoge1xuLy8gXHRcdFx0XHRcdHZhbHVlOiBpc0Jsb2NrZWQoXCJ0aGlyc3R5XCIsIFwiY29sZFwiLCBcImh1bmdyeVwiKVxuLy8gXHRcdFx0XHRcdFx0PyB0aGlzLmF0dHJpYnV0ZXMuc3RyZW5ndGgudmFsdWVcbi8vIFx0XHRcdFx0XHRcdDogdGhpcy5hdHRyaWJ1dGVzLnN0cmVuZ3RoLm1heCxcbi8vIFx0XHRcdFx0fSxcbi8vIFx0XHRcdFx0d2l0czoge1xuLy8gXHRcdFx0XHRcdHZhbHVlOiBpc0Jsb2NrZWQoXCJ0aGlyc3R5XCIsIFwiY29sZFwiLCBcInNsZWVweVwiKVxuLy8gXHRcdFx0XHRcdFx0PyB0aGlzLmF0dHJpYnV0ZXMud2l0cy52YWx1ZVxuLy8gXHRcdFx0XHRcdFx0OiB0aGlzLmF0dHJpYnV0ZXMud2l0cy5tYXgsXG4vLyBcdFx0XHRcdH0sXG4vLyBcdFx0XHRcdGVtcGF0aHk6IHtcbi8vIFx0XHRcdFx0XHR2YWx1ZTogaXNCbG9ja2VkKFwidGhpcnN0eVwiKSA/IHRoaXMuYXR0cmlidXRlcy5lbXBhdGh5LnZhbHVlIDogdGhpcy5hdHRyaWJ1dGVzLmVtcGF0aHkubWF4LFxuLy8gXHRcdFx0XHR9LFxuLy8gXHRcdFx0fSxcbi8vIFx0XHR9O1xuLy8gXHRcdGlmICh0aGlzLmNvbmRpdGlvbnM/LnNsZWVweS52YWx1ZSkgdGhpcy50b2dnbGVDb25kaXRpb24oXCJzbGVlcHlcIik7XG4vLyBcdFx0dGhpcy51cGRhdGUoeyBkYXRhIH0pO1xuLy8gXHRcdGNvbnN0IHNsZWVweUluZGV4ID0gYWN0aXZlQ29uZGl0aW9ucy5tYXAoKFtrZXksIF9dKSA9PiBrZXkpLmluZGV4T2YoXCJzbGVlcHlcIik7XG4vLyBcdFx0Y29uc3Qgd2FzU2xlZXB5ID0gc2xlZXB5SW5kZXggPiAtMTtcbi8vIFx0XHRpZiAod2FzU2xlZXB5KSBhY3RpdmVDb25kaXRpb25zLnNwbGljZShzbGVlcHlJbmRleCwgMSk7XG4vLyBcdFx0Y29uc3QgZm9ybWF0dGVyID0gbmV3IEludGwuTGlzdEZvcm1hdChnYW1lLmkxOG4ubGFuZywgeyBzdHlsZTogXCJsb25nXCIgfSk7XG4vLyBcdFx0Q2hhdE1lc3NhZ2UuY3JlYXRlKHtcbi8vIFx0XHRcdGNvbnRlbnQ6IGA8ZGl2IGNsYXNzPVwiZmFidWxhLXVsdGltYSBjaGF0LWl0ZW1cIj48aDM+JHt0aGlzLm5hbWV9PC9oMz48aDQ+JHtsb2NhbGl6ZShcIkFDVElPTi5SRVNUXCIpfTwvaDQ+JHtcbi8vIFx0XHRcdFx0d2FzU2xlZXB5ID8gYDxwPiR7dGhpcy5uYW1lfSAke2xvY2FsaXplKFwiQ09ORElUSU9OLklTX05PX0xPTkdFUl9TTEVFUFlcIil9LjwvcD5gIDogXCJcIlxuLy8gXHRcdFx0fSR7XG4vLyBcdFx0XHRcdGFjdGl2ZUNvbmRpdGlvbnMubGVuZ3RoXG4vLyBcdFx0XHRcdFx0PyBgPHA+JHt0aGlzLm5hbWV9ICR7bG9jYWxpemUoXCJDT05ESVRJT04uU1VGRkVSSU5HX0ZST01cIil9ICR7Zm9ybWF0dGVyLmZvcm1hdChcbi8vIFx0XHRcdFx0XHRcdFx0YWN0aXZlQ29uZGl0aW9uc1xuLy8gXHRcdFx0XHRcdFx0XHRcdC5maWx0ZXIoKFtrZXksIF9dKSA9PiBrZXkgIT09IFwic2xlZXB5XCIpXG4vLyBcdFx0XHRcdFx0XHRcdFx0Lm1hcCgoW18sIHZhbHVlXSkgPT4gYDxiPiR7bG9jYWxpemUodmFsdWUubGFiZWwpfTwvYj5gKSxcbi8vIFx0XHRcdFx0XHQgICl9LjwvcD5gXG4vLyBcdFx0XHRcdFx0OiBcIlwiXG4vLyBcdFx0XHR9PC9kaXY+YCxcbi8vIFx0XHRcdHNwZWFrZXI6IHsgYWN0b3I6IHRoaXMgfSxcbi8vIFx0XHRcdHdoaXNwZXI6IGdhbWUudXNlci5pc0dNID8gW2dhbWUudXNlci5pZF0gOiBbXSxcbi8vIFx0XHR9KTtcbi8vIFx0fVxuLy8gfVxuLy9cbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBsb2NhbGl6ZVN0cmluZyhzdHJpbmcpIHtcblx0aWYgKCFzdHJpbmcpIGNvbnNvbGUubG9nKGBObyBzdHJpbmcgcGFzc2VkYCk7XG5cdHRyeSB7XG5cdFx0Y29uc3QgZGljdCA9IENPTkZJRy5mYWJ1bGFVbHRpbWEuaTE4bjtcblx0XHRsZXQgbG9jYWxlU3RyaW5nID0gZGljdFtzdHJpbmddO1xuXHRcdGlmICghbG9jYWxlU3RyaW5nKSBsb2NhbGVTdHJpbmcgPSBzdHJpbmc7XG5cblx0XHRyZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKGxvY2FsZVN0cmluZyk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Y29uc29sZS5sb2coYEZhaWxlZCB0byBsb2NhbGl6ZSBzdHJpbmc6ICR7c3RyaW5nfS4gRXJyb3I6IGAsIGVycm9yKTtcblxuXHRcdHJldHVybiBzdHJpbmc7XG5cdH1cbn1cbiIsICJpbXBvcnQgbG9jYWxpemVTdHJpbmcgZnJvbSBcIi4uL3V0aWxzL2xvY2FsaXplLXN0cmluZy5qc1wiO1xuaW1wb3J0IHsgb2JqZWN0U2VhcmNoIH0gZnJvbSBcIi4uL3V0aWxzL29iamVjdC1zZWFyY2guanNcIjtcblxuZXhwb3J0IGNsYXNzIEZhYnVsYVVsdGltYUl0ZW0gZXh0ZW5kcyBJdGVtIHtcbiAgZ2V0IGl0ZW1Qcm9wZXJ0aWVzKCkge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbTtcbiAgfVxufVxuIiwgImV4cG9ydCBmdW5jdGlvbiBvYmplY3RTZWFyY2gob2JqZWN0LCBzdHJpbmcpIHtcblx0aWYgKCF2YWxpZGF0ZU9iamVjdChvYmplY3QpIHx8ICF2YWxpZGF0ZVN0cmluZyhzdHJpbmcpKSByZXR1cm4gY29uc29sZS5lcnJvcihcIkludmFsaWQgYXJndW1lbnRzXCIpO1xuXHRjb25zdCByZXN1bHQgPSBPYmplY3QuZW50cmllcyhvYmplY3QpLmZpbmQoKGVudHJpZXMpID0+IGVudHJpZXNbMV0gPT09IHN0cmluZyk7XG5cdHJldHVybiByZXN1bHQgPyByZXN1bHRbMF0gOiBudWxsO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZU9iamVjdChvYmplY3QpIHtcblx0cmV0dXJuICEhb2JqZWN0ICYmIHR5cGVvZiBvYmplY3QgPT09IFwib2JqZWN0XCIgJiYgIWZvdW5kcnkudXRpbHMuaXNFbXB0eShvYmplY3QpO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZVN0cmluZyhzdHJpbmcpIHtcblx0cmV0dXJuICEhc3RyaW5nICYmIHR5cGVvZiBzdHJpbmcgPT09IFwic3RyaW5nXCI7XG59XG4iLCAiaW1wb3J0IGxvY2FsaXplU3RyaW5nIGZyb20gXCJAdXRpbHMvbG9jYWxpemUtc3RyaW5nLmpzXCI7XG5cbmZ1bmN0aW9uIHByZWxvYWRIYW5kbGViYXJzVGVtcGxhdGVzKCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgY29uc3QgdGVtcGxhdGVQYXRocyA9IEdMT0JBTFBBVEhTO1xuICByZXR1cm4gbG9hZFRlbXBsYXRlcyh0ZW1wbGF0ZVBhdGhzKTtcbn1cblxuZnVuY3Rpb24gcmVnaXN0ZXJIYW5kbGViYXJzSGVscGVycygpIHtcbiAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihcInNrdWxsc1wiLCBmdW5jdGlvbiAoY3VycmVudCwgbWF4LCBibG9jaykge1xuICAgIHZhciBhY2MgPSBcIlwiO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyArK2kpIHtcbiAgICAgIGJsb2NrLmRhdGEuaW5kZXggPSBpO1xuICAgICAgYmxvY2suZGF0YS5kYW1hZ2VkID0gaSA+PSBjdXJyZW50O1xuICAgICAgYWNjICs9IGJsb2NrLmZuKHRoaXMpO1xuICAgIH1cbiAgICByZXR1cm4gYWNjO1xuICB9KTtcbiAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihcImZscHNfZW5yaWNoXCIsIGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgLy8gRW5yaWNoIHRoZSBjb250ZW50XG4gICAgY29udGVudCA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChjb250ZW50LCB7IGRvY3VtZW50czogdHJ1ZSwgYXN5bmM6IGZhbHNlIH0pO1xuICAgIHJldHVybiBuZXcgSGFuZGxlYmFycy5TYWZlU3RyaW5nKGNvbnRlbnQpO1xuICB9KTtcbiAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihcImZscHNfY2FwaXRhbGl6ZVwiLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHZhbHVlLmxlbmd0aCA+IDAgPyB2YWx1ZVswXS50b1VwcGVyQ2FzZSgpICsgdmFsdWUuc2xpY2UoMSkgOiB2YWx1ZTtcbiAgfSk7XG4gIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoXCJmbHBzX3N0cmNvbmNhdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gICAgYXJncy5wb3AoKTsgLy8gcmVtb3ZlIHVucmVsYXRlZCBkYXRhXG4gICAgcmV0dXJuIGFyZ3Muam9pbihcIlwiKTtcbiAgfSk7XG5cbiAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihcImRhbWFnZVR5cGVcIiwgZnVuY3Rpb24gKHR5cGUpIHtcbiAgICB0eXBlID0gbm9ybWFsaXplKHR5cGUsIFwiYmx1bnRcIik7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIFwiYmx1bnRcIjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZShcIkFUVEFDSy5CTFVOVFwiKTtcbiAgICAgIGNhc2UgXCJmZWFyXCI6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoXCJBVFRBQ0suRkVBUlwiKTtcbiAgICAgIGNhc2UgXCJzbGFzaFwiOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKFwiQVRUQUNLLlNMQVNIXCIpO1xuICAgICAgY2FzZSBcInN0YWJcIjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZShcIkFUVEFDSy5TVEFCXCIpO1xuICAgICAgY2FzZSBcIm90aGVyXCI6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoXCJBVFRBQ0suT1RIRVJcIik7XG4gICAgfVxuICB9KTtcbiAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihcImFybW9yUGFydFwiLCBmdW5jdGlvbiAocGFydCkge1xuICAgIHBhcnQgPSBub3JtYWxpemUocGFydCwgXCJib2R5XCIpO1xuICAgIHN3aXRjaCAocGFydCkge1xuICAgICAgY2FzZSBcImJvZHlcIjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZShcIkFSTU9SLkJPRFlcIik7XG4gICAgICBjYXNlIFwiaGVhZFwiOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKFwiQVJNT1IuSEVMTUVUXCIpO1xuICAgICAgY2FzZSBcInNoaWVsZFwiOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKFwiQVJNT1IuU0hJRUxEXCIpO1xuICAgIH1cbiAgfSk7XG4gIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoXCJpdGVtV2VpZ2h0XCIsIGZ1bmN0aW9uICh3ZWlnaHQpIHtcbiAgICBjb25zdCB3ZWlnaHRMb3dlckNhc2UgPSBub3JtYWxpemUod2VpZ2h0LCBcInJlZ3VsYXJcIik7XG4gICAgc3dpdGNoICh3ZWlnaHRMb3dlckNhc2UpIHtcbiAgICAgIGNhc2UgXCJub25lXCI6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoXCJXRUlHSFQuTk9ORVwiKTtcbiAgICAgIGNhc2UgXCJ0aW55XCI6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoXCJXRUlHSFQuVElOWVwiKTtcbiAgICAgIGNhc2UgXCJsaWdodFwiOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKFwiV0VJR0hULkxJR0hUXCIpO1xuICAgICAgY2FzZSBcInJlZ3VsYXJcIjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZShcIldFSUdIVC5SRUdVTEFSXCIpO1xuICAgICAgY2FzZSBcImhlYXZ5XCI6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoXCJXRUlHSFQuSEVBVllcIik7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gd2VpZ2h0O1xuICAgIH1cbiAgfSk7XG4gIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoXCJ3ZWFwb25DYXRlZ29yeVwiLCBmdW5jdGlvbiAoY2F0ZWdvcnkpIHtcbiAgICBjYXRlZ29yeSA9IG5vcm1hbGl6ZShjYXRlZ29yeSwgXCJtZWxlZVwiKTtcbiAgICBzd2l0Y2ggKGNhdGVnb3J5KSB7XG4gICAgICBjYXNlIFwibWVsZWVcIjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZShcIldFQVBPTi5NRUxFRVwiKTtcbiAgICAgIGNhc2UgXCJyYW5nZWRcIjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZShcIldFQVBPTi5SQU5HRURcIik7XG4gICAgfVxuICB9KTtcbiAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihcIndlYXBvbkdyaXBcIiwgZnVuY3Rpb24gKGdyaXApIHtcbiAgICBncmlwID0gbm9ybWFsaXplKGdyaXAsIFwiMWhcIik7XG4gICAgc3dpdGNoIChncmlwKSB7XG4gICAgICBjYXNlIFwiMWhcIjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZShcIldFQVBPTi4xSFwiKTtcbiAgICAgIGNhc2UgXCIyaFwiOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKFwiV0VBUE9OLjJIXCIpO1xuICAgIH1cbiAgfSk7XG4gIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoXCJ3ZWFwb25SYW5nZVwiLCBmdW5jdGlvbiAocmFuZ2UpIHtcbiAgICByYW5nZSA9IG5vcm1hbGl6ZShyYW5nZSwgXCJhcm1cIik7XG4gICAgc3dpdGNoIChyYW5nZSkge1xuICAgICAgY2FzZSBcImFybVwiOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKFwiUkFOR0UuQVJNXCIpO1xuICAgICAgY2FzZSBcIm5lYXJcIjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZShcIlJBTkdFLk5FQVJcIik7XG4gICAgICBjYXNlIFwic2hvcnRcIjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZShcIlJBTkdFLlNIT1JUXCIpO1xuICAgICAgY2FzZSBcImxvbmdcIjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZShcIlJBTkdFLkxPTkdcIik7XG4gICAgICBjYXNlIFwiZGlzdGFudFwiOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKFwiUkFOR0UuRElTVEFOVFwiKTtcbiAgICB9XG4gIH0pO1xuICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKFwidGFsZW50VHlwZVwiLCBmdW5jdGlvbiAodHlwZSkge1xuICAgIHR5cGUgPSBub3JtYWxpemUodHlwZSwgXCJnZW5lcmFsXCIpO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBcImdlbmVyYWxcIjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZShcIlRBTEVOVC5HRU5FUkFMXCIpO1xuICAgICAgY2FzZSBcImtpblwiOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKFwiVEFMRU5ULktJTlwiKTtcbiAgICAgIGNhc2UgXCJwcm9mZXNzaW9uXCI6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoXCJUQUxFTlQuUFJPRkVTU0lPTlwiKTtcbiAgICB9XG4gIH0pO1xuICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKFwiaXNCcm9rZW5cIiwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBpZiAocGFyc2VJbnQoaXRlbS5zeXN0ZW0uYm9udXMubWF4LCAxMCkgPiAwICYmIHBhcnNlSW50KGl0ZW0uc3lzdGVtLmJvbnVzLnZhbHVlLCAxMCkgPT09IDApIHtcbiAgICAgIHJldHVybiBcImJyb2tlblwiO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gIH0pO1xuICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKFwiZm9ybWF0Um9sbE1vZGlmaWVyc1wiLCBmdW5jdGlvbiAocm9sbE1vZGlmaWVycykge1xuICAgIGxldCBvdXRwdXQgPSBbXTtcbiAgICBPYmplY3QudmFsdWVzKHJvbGxNb2RpZmllcnMpXG4gICAgICAuZmlsdGVyKChtb2QpID0+ICFtb2QuZ2VhckJvbnVzKVxuICAgICAgLmZvckVhY2goKG1vZCkgPT4ge1xuICAgICAgICBsZXQgbW9kTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShtb2QubmFtZSk7XG4gICAgICAgIG91dHB1dC5wdXNoKGAke21vZE5hbWV9ICR7bW9kLnZhbHVlfWApO1xuICAgICAgfSk7XG4gICAgcmV0dXJuIG91dHB1dC5qb2luKFwiLCBcIik7XG4gIH0pO1xuXG4gIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoXCJoYXNXZWFwb25GZWF0dXJlc1wiLCBmdW5jdGlvbiAod2VhcG9uVHlwZSwgZmVhdHVyZXMpIHtcbiAgICBjb25zdCBtZWxlZUZlYXR1cmVzID0gW1wiZWRnZWRcIiwgXCJwb2ludGVkXCIsIFwiYmx1bnRcIiwgXCJwYXJyeVwiLCBcImhvb2tcIl07XG4gICAgY29uc3QgcmFuZ2VkRmVhdHVyZXMgPSBbXCJzbG93UmVsb2FkXCJdO1xuXG4gICAgaWYgKGZlYXR1cmVzLm90aGVycyAhPT0gXCJcIikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgbGV0IHdlYXBvbkZlYXR1cmVzID0gW107XG4gICAgaWYgKHdlYXBvblR5cGUgPT09IFwibWVsZWVcIikge1xuICAgICAgd2VhcG9uRmVhdHVyZXMgPSBtZWxlZUZlYXR1cmVzO1xuICAgIH0gZWxzZSBpZiAod2VhcG9uVHlwZSA9PT0gXCJyYW5nZWRcIikge1xuICAgICAgd2VhcG9uRmVhdHVyZXMgPSByYW5nZWRGZWF0dXJlcztcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGZlYXR1cmUgaW4gZmVhdHVyZXMpIHtcbiAgICAgIGlmICh3ZWFwb25GZWF0dXJlcy5pbmNsdWRlcyhmZWF0dXJlKSAmJiBmZWF0dXJlc1tmZWF0dXJlXSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9KTtcblxuICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKFwiZm9ybWF0V2VhcG9uRmVhdHVyZXNcIiwgZnVuY3Rpb24gKHdlYXBvblR5cGUsIGZlYXR1cmVzKSB7XG4gICAgbGV0IG91dHB1dCA9IFtdO1xuICAgIGlmICh3ZWFwb25UeXBlID09PSBcIm1lbGVlXCIpIHtcbiAgICAgIGlmIChmZWF0dXJlcy5lZGdlZCkge1xuICAgICAgICBvdXRwdXQucHVzaChnYW1lLmkxOG4ubG9jYWxpemUoXCJXRUFQT04uRkVBVFVSRVMuRURHRURcIikpO1xuICAgICAgfVxuICAgICAgaWYgKGZlYXR1cmVzLnBvaW50ZWQpIHtcbiAgICAgICAgb3V0cHV0LnB1c2goZ2FtZS5pMThuLmxvY2FsaXplKFwiV0VBUE9OLkZFQVRVUkVTLlBPSU5URURcIikpO1xuICAgICAgfVxuICAgICAgaWYgKGZlYXR1cmVzLmJsdW50KSB7XG4gICAgICAgIG91dHB1dC5wdXNoKGdhbWUuaTE4bi5sb2NhbGl6ZShcIldFQVBPTi5GRUFUVVJFUy5CTFVOVFwiKSk7XG4gICAgICB9XG4gICAgICBpZiAoZmVhdHVyZXMucGFycnlpbmcpIHtcbiAgICAgICAgb3V0cHV0LnB1c2goZ2FtZS5pMThuLmxvY2FsaXplKFwiV0VBUE9OLkZFQVRVUkVTLlBBUlJZSU5HXCIpKTtcbiAgICAgIH1cbiAgICAgIGlmIChmZWF0dXJlcy5ob29rKSB7XG4gICAgICAgIG91dHB1dC5wdXNoKGdhbWUuaTE4bi5sb2NhbGl6ZShcIldFQVBPTi5GRUFUVVJFUy5IT09LXCIpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHdlYXBvblR5cGUgPT09IFwicmFuZ2VkXCIpIHtcbiAgICAgIGlmIChmZWF0dXJlcy5zbG93UmVsb2FkKSB7XG4gICAgICAgIG91dHB1dC5wdXNoKGdhbWUuaTE4bi5sb2NhbGl6ZShcIldFQVBPTi5GRUFUVVJFUy5TTE9XX1JFTE9BRFwiKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChmZWF0dXJlcy5vdGhlcnMpIHtcbiAgICAgIG91dHB1dC5wdXNoKGZlYXR1cmVzLm90aGVycyk7XG4gICAgfSBlbHNlIGlmIChmZWF0dXJlcykge1xuICAgICAgb3V0cHV0LnB1c2goZmVhdHVyZXMpO1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0LmpvaW4oXCIsIFwiKTtcbiAgfSk7XG5cbiAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihcInBsYWludGV4dFRvSFRNTFwiLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAvLyBzdHJpcCB0YWdzLCBhZGQgPGJyLz4gdGFnc1xuICAgIHJldHVybiBuZXcgSGFuZGxlYmFycy5TYWZlU3RyaW5nKHZhbHVlLnJlcGxhY2UoLyg8KFtePl0rKT4pL2dpLCBcIlwiKS5yZXBsYWNlKC8oPzpcXHJcXG58XFxyfFxcbikvZywgXCI8YnIvPlwiKSk7XG4gIH0pO1xuXG4gIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoXCJ0b1VwcGVyQ2FzZVwiLCBmdW5jdGlvbiAoc3RyKSB7XG4gICAgcmV0dXJuIHN0ci50b1VwcGVyQ2FzZSgpO1xuICB9KTtcblxuICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKFwiZXFcIiwgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDAsIC0xKTtcbiAgICByZXR1cm4gYXJncy5ldmVyeShmdW5jdGlvbiAoZXhwcmVzc2lvbikge1xuICAgICAgcmV0dXJuIGFyZ3NbMF0gPT09IGV4cHJlc3Npb247XG4gICAgfSk7XG4gIH0pO1xuXG4gIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoXCJvclwiLCBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCwgLTEpO1xuICAgIHJldHVybiBhcmdzLnJlZHVjZSgoeCwgeSkgPT4geCB8fCB5KTtcbiAgfSk7XG5cbiAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihcImFuZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCwgLTEpO1xuICAgIHJldHVybiBhcmdzLnJlZHVjZSgoeCwgeSkgPT4geCAmJiB5KTtcbiAgfSk7XG5cbiAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihcImNoYXJnZW5Mb2NcIiwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBsZXQgbG9jYWxpemVkU3RyaW5nID0gQ09ORklHLmZibC5pMThuW2l0ZW1dO1xuICAgIGlmICghbG9jYWxpemVkU3RyaW5nKSB7XG4gICAgICBjb25zdCBTS0lMTF9OQU1FID0gaXRlbS50b1VwcGVyQ2FzZSgpLnJlcGxhY2UoL1tcXHMtXS9nLCBcIl9cIik7XG4gICAgICBsb2NhbGl6ZWRTdHJpbmcgPSBgU0tJTEwuJHtTS0lMTF9OQU1FfWA7XG4gICAgfVxuICAgIHJldHVybiBsb2NhbGl6ZWRTdHJpbmc7XG4gIH0pO1xuXG4gIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoXCJnZXRUeXBlXCIsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgcmV0dXJuIHR5cGVvZiAoTnVtYmVyKGl0ZW0pIHx8IGl0ZW0pO1xuICB9KTtcblxuICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKFwicmFuZG9taXplXCIsIChpdGVtcykgPT4ge1xuICAgIHJldHVybiBpdGVtc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBpdGVtcy5sZW5ndGgpXTtcbiAgfSk7XG5cbiAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihcImZibExvY2FsaXplXCIsIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgYXJncy5wb3AoKTtcbiAgICByZXR1cm4gbG9jYWxpemVTdHJpbmcoYXJncy5qb2luKFwiLlwiKSk7XG4gIH0pO1xuXG4gIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoXCJ0ZXJuYXJ5XCIsIGZ1bmN0aW9uIChjb25kaXRpb25hbCwgc3RyaW5nMSwgc3RyaW5nMikge1xuICAgIHJldHVybiBjb25kaXRpb25hbCA/IHN0cmluZzEgOiBzdHJpbmcyO1xuICB9KTtcbiAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihcImNvdW50XCIsIGZ1bmN0aW9uIChhcnJheSA9IFtdKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5KSkgcmV0dXJuIDA7XG4gICAgcmV0dXJuIGFycmF5Lmxlbmd0aDtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZShkYXRhLCBkZWZhdWx0VmFsdWUpIHtcbiAgaWYgKGRhdGEpIHtcbiAgICByZXR1cm4gZGF0YS50b0xvd2VyQ2FzZSgpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGluaXRpYWxpemVIYW5kbGViYXJzID0gKCkgPT4ge1xuICByZWdpc3RlckhhbmRsZWJhcnNIZWxwZXJzKCk7XG4gIHByZWxvYWRIYW5kbGViYXJzVGVtcGxhdGVzKCk7XG59O1xuIiwgImltcG9ydCB7IEZhYnVsYVVsdGltYUNoYXJhY3RlclNoZWV0IH0gZnJvbSBcIkBhY3Rvci9jaGFyYWN0ZXIvc2hlZXQuanNcIjtcbi8vIGltcG9ydCB7IEZhYnVsYVVsdGltYU1vbnN0ZXJTaGVldCB9IGZyb20gXCJAYWN0b3IvbW9uc3Rlci9tb25zdGVyLXNoZWV0LmpzXCI7XG4vLyBpbXBvcnQgeyBGYWJ1bGFVbHRpbWFTdHJvbmdob2xkU2hlZXQgfSBmcm9tIFwiQGFjdG9yL3N0cm9uZ2hvbGQvc3Ryb25naG9sZC1zaGVldC5qc1wiO1xuLy8gaW1wb3J0IHsgRmFidWxhVWx0aW1hUGFydHlTaGVldCB9IGZyb20gXCJAYWN0b3IvcGFydHkvcGFydHktc2hlZXQuanNcIjtcbmltcG9ydCB7IEZhYnVsYVVsdGltYUNsYXNzU2hlZXQgfSBmcm9tIFwiQGl0ZW0vY2xhc3Mvc2hlZXQuanNcIjtcbi8vIGltcG9ydCB7IEZhYnVsYVVsdGltYUFybW9yU2hlZXQgfSBmcm9tIFwiQGl0ZW0vYXJtb3IvYXJtb3Itc2hlZXQuanNcIjtcbi8vIGltcG9ydCB7IEZhYnVsYVVsdGltYUdlYXJTaGVldCB9IGZyb20gXCJAaXRlbS9nZWFyL2dlYXItc2hlZXQuanNcIjtcbi8vIGltcG9ydCB7IEZhYnVsYVVsdGltYVJhd01hdGVyaWFsU2hlZXQgfSBmcm9tIFwiQGl0ZW0vcmF3LW1hdGVyaWFsL3Jhdy1tYXRlcmlhbC1zaGVldC5qc1wiO1xuLy8gaW1wb3J0IHsgRmFidWxhVWx0aW1hU3BlbGxTaGVldCB9IGZyb20gXCJAaXRlbS9zcGVsbC9zcGVsbC1zaGVldC5qc1wiO1xuLy8gaW1wb3J0IHsgRmFidWxhVWx0aW1hVGFsZW50U2hlZXQgfSBmcm9tIFwiQGl0ZW0vdGFsZW50L3RhbGVudC1zaGVldC5qc1wiO1xuLy8gaW1wb3J0IHsgRmFidWxhVWx0aW1hQ3JpdGljYWxJbmp1cnlTaGVldCB9IGZyb20gXCJAaXRlbS9jcml0aWNhbC1pbmp1cnkvY3JpdGljYWwtaW5qdXJ5LXNoZWV0LmpzXCI7XG4vLyBpbXBvcnQgeyBGYWJ1bGFVbHRpbWFNb25zdGVyQXR0YWNrU2hlZXQgfSBmcm9tIFwiQGl0ZW0vbW9uc3Rlci1hdHRhY2svbW9uc3Rlci1hdHRhY2stc2hlZXQuanNcIjtcbi8vIGltcG9ydCB7IEZhYnVsYVVsdGltYUJ1aWxkaW5nU2hlZXQgfSBmcm9tIFwiQGl0ZW0vYnVpbGRpbmcvYnVpbGRpbmctc2hlZXQuanNcIjtcbi8vIGltcG9ydCB7IEZhYnVsYVVsdGltYUhpcmVsaW5nU2hlZXQgfSBmcm9tIFwiQGl0ZW0vaGlyZWxpbmcvaGlyZWxpbmctc2hlZXQuanNcIjtcbi8vIGltcG9ydCB7IEFkdmVudHVyZVNpdGVzU2hlZXQgfSBmcm9tIFwiQGpvdXJuYWwvYWR2ZW50dXJlLXNpdGVzL2FkdmVudHVyZS1zaXRlLXNoZWV0LmpzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclNoZWV0cygpIHtcblx0QWN0b3JzLnVucmVnaXN0ZXJTaGVldChcImNvcmVcIiwgQWN0b3JTaGVldCk7XG5cdEFjdG9ycy5yZWdpc3RlclNoZWV0KFwiZmFidWxhLXVsdGltYVwiLCBGYWJ1bGFVbHRpbWFDaGFyYWN0ZXJTaGVldCwgeyB0eXBlczogW1wiY2hhcmFjdGVyXCJdLCBtYWtlRGVmYXVsdDogdHJ1ZSB9KTtcbn1cbi8vIFx0QWN0b3JzLnJlZ2lzdGVyU2hlZXQoXCJmYWJ1bGEtdWx0aW1hXCIsIEZhYnVsYVVsdGltYU1vbnN0ZXJTaGVldCwgeyB0eXBlczogW1wibW9uc3RlclwiXSwgbWFrZURlZmF1bHQ6IHRydWUgfSk7XG4vLyBcdEFjdG9ycy5yZWdpc3RlclNoZWV0KFwiZmFidWxhLXVsdGltYVwiLCBGYWJ1bGFVbHRpbWFTdHJvbmdob2xkU2hlZXQsIHtcbi8vIFx0XHR0eXBlczogW1wic3Ryb25naG9sZFwiXSxcbi8vIFx0XHRtYWtlRGVmYXVsdDogdHJ1ZSxcbi8vIFx0fSk7XG4vLyBcdEFjdG9ycy5yZWdpc3RlclNoZWV0KFwiZmFidWxhLXVsdGltYVwiLCBGYWJ1bGFVbHRpbWFQYXJ0eVNoZWV0LCB7IHR5cGVzOiBbXCJwYXJ0eVwiXSwgbWFrZURlZmF1bHQ6IHRydWUgfSk7XG4vLyBcdEl0ZW1zLnVucmVnaXN0ZXJTaGVldChcImNvcmVcIiwgSXRlbVNoZWV0KTtcblx0SXRlbXMucmVnaXN0ZXJTaGVldChcImZhYnVsYS11bHRpbWFcIiwgRmFidWxhVWx0aW1hQ2xhc3NTaGVldCwgeyB0eXBlczogW1wiY2xhc3NcIl0sIG1ha2VEZWZhdWx0OiB0cnVlIH0pO1xuLy8gXHRJdGVtcy5yZWdpc3RlclNoZWV0KFwiZmFidWxhLXVsdGltYVwiLCBGYWJ1bGFVbHRpbWFBcm1vclNoZWV0LCB7IHR5cGVzOiBbXCJhcm1vclwiXSwgbWFrZURlZmF1bHQ6IHRydWUgfSk7XG4vLyBcdEl0ZW1zLnJlZ2lzdGVyU2hlZXQoXCJmYWJ1bGEtdWx0aW1hXCIsIEZhYnVsYVVsdGltYUdlYXJTaGVldCwgeyB0eXBlczogW1wiZ2VhclwiXSwgbWFrZURlZmF1bHQ6IHRydWUgfSk7XG4vLyBcdEl0ZW1zLnJlZ2lzdGVyU2hlZXQoXCJmYWJ1bGEtdWx0aW1hXCIsIEZhYnVsYVVsdGltYVJhd01hdGVyaWFsU2hlZXQsIHtcbi8vIFx0XHR0eXBlczogW1wicmF3TWF0ZXJpYWxcIl0sXG4vLyBcdFx0bWFrZURlZmF1bHQ6IHRydWUsXG4vLyBcdH0pO1xuLy8gXHRJdGVtcy5yZWdpc3RlclNoZWV0KFwiZmFidWxhLXVsdGltYVwiLCBGYWJ1bGFVbHRpbWFTcGVsbFNoZWV0LCB7IHR5cGVzOiBbXCJzcGVsbFwiXSwgbWFrZURlZmF1bHQ6IHRydWUgfSk7XG4vLyBcdEl0ZW1zLnJlZ2lzdGVyU2hlZXQoXCJmYWJ1bGEtdWx0aW1hXCIsIEZhYnVsYVVsdGltYVRhbGVudFNoZWV0LCB7IHR5cGVzOiBbXCJ0YWxlbnRcIl0sIG1ha2VEZWZhdWx0OiB0cnVlIH0pO1xuLy8gXHRJdGVtcy5yZWdpc3RlclNoZWV0KFwiZmFidWxhLXVsdGltYVwiLCBGYWJ1bGFVbHRpbWFDcml0aWNhbEluanVyeVNoZWV0LCB7XG4vLyBcdFx0dHlwZXM6IFtcImNyaXRpY2FsSW5qdXJ5XCJdLFxuLy8gXHRcdG1ha2VEZWZhdWx0OiB0cnVlLFxuLy8gXHR9KTtcbi8vIFx0SXRlbXMucmVnaXN0ZXJTaGVldChcImZhYnVsYS11bHRpbWFcIiwgRmFidWxhVWx0aW1hTW9uc3RlckF0dGFja1NoZWV0LCB7XG4vLyBcdFx0dHlwZXM6IFtcIm1vbnN0ZXJBdHRhY2tcIl0sXG4vLyBcdFx0bWFrZURlZmF1bHQ6IHRydWUsXG4vLyBcdH0pO1xuLy8gXHRJdGVtcy5yZWdpc3RlclNoZWV0KFwiZmFidWxhLXVsdGltYVwiLCBGYWJ1bGFVbHRpbWFCdWlsZGluZ1NoZWV0LCB7IHR5cGVzOiBbXCJidWlsZGluZ1wiXSwgbWFrZURlZmF1bHQ6IHRydWUgfSk7XG4vLyBcdEl0ZW1zLnJlZ2lzdGVyU2hlZXQoXCJmYWJ1bGEtdWx0aW1hXCIsIEZhYnVsYVVsdGltYUhpcmVsaW5nU2hlZXQsIHsgdHlwZXM6IFtcImhpcmVsaW5nXCJdLCBtYWtlRGVmYXVsdDogdHJ1ZSB9KTtcbi8vIFx0Q09ORklHLmZibC5hZHZlbnR1cmVTaXRlcy5zaGVldENsYXNzID0gQWR2ZW50dXJlU2l0ZXNTaGVldDtcbi8vIH1cbiIsICIvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuaW1wb3J0IHsgRmFidWxhVWx0aW1hQWN0b3JTaGVldCB9IGZyb20gXCIuLi9zaGVldC5qc1wiO1xuLy8gaW1wb3J0IHsgRmFidWxhVWx0aW1hQ2hhcmFjdGVyR2VuZXJhdG9yIH0gZnJvbSBcIkBjb21wb25lbnRzL2NoYXJhY3Rlci1nZW5lcmF0b3IvY2hhcmFjdGVyLWdlbmVyYXRvci5qc1wiO1xuLy8gaW1wb3J0IHsgRkJMUm9sbCwgRkJMUm9sbEhhbmRsZXIgfSBmcm9tIFwiQGNvbXBvbmVudHMvcm9sbC1lbmdpbmUvZW5naW5lLmpzXCI7XG4vLyBpbXBvcnQgbG9jYWxpemVTdHJpbmcgZnJvbSBcIkB1dGlscy9sb2NhbGl6ZS1zdHJpbmdcIjtcbi8vIGltcG9ydCB7IEFjdG9yU2hlZXRDb25maWcgfSBmcm9tIFwiQHV0aWxzL3NoZWV0LWNvbmZpZy5qc1wiO1xuXG5leHBvcnQgY2xhc3MgRmFidWxhVWx0aW1hQ2hhcmFjdGVyU2hlZXQgZXh0ZW5kcyBGYWJ1bGFVbHRpbWFBY3RvclNoZWV0IHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucygpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFtcImZhYnVsYS11bHRpbWFcIiwgXCJzaGVldFwiLCBcImFjdG9yXCJdLFxuICAgICAgd2lkdGg6IDY2MCxcbiAgICAgIGhlaWdodDogNzQwLFxuICAgICAgcmVzaXphYmxlOiBmYWxzZSxcbiAgICAgIHNjcm9sbFk6IFtcbiAgICAgICAgXCIuYXJtb3JzIC5pdGVtLWxpc3QgLml0ZW1zXCIsXG4gICAgICAgIFwiLmNyaXRpY2FsLWluanVyaWVzIC5pdGVtLWxpc3QgLml0ZW1zXCIsXG4gICAgICAgIFwiLmdlYXJzIC5pdGVtLWxpc3QgLml0ZW1zXCIsXG4gICAgICAgIFwiLnNwZWxscyAuaXRlbS1saXN0IC5pdGVtc1wiLFxuICAgICAgICBcIi50YWxlbnRzIC5pdGVtLWxpc3QgLml0ZW1zXCIsXG4gICAgICAgIFwiLndlYXBvbnMgLml0ZW0tbGlzdCAuaXRlbXNcIixcbiAgICAgIF0sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogXCIuc2hlZXQtdGFic1wiLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogXCIuc2hlZXQtYm9keVwiLFxuICAgICAgICAgIGluaXRpYWw6IFwibWFpblwiLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9KTtcbiAgfVxuXG5cdGdldCB0ZW1wbGF0ZSgpIHtcblx0XHRyZXR1cm4gXCJzeXN0ZW1zL2ZhYnVsYS11bHRpbWEvdGVtcGxhdGVzL2FjdG9yL2NoYXJhY3Rlci9zaGVldC5oYnNcIjtcbiAgfVxuLy8gXHRcdGlmICghZ2FtZS51c2VyLmlzR00gJiYgdGhpcy5hY3Rvci5saW1pdGVkKVxuLy8gXHRcdFx0cmV0dXJuIFwic3lzdGVtcy9mYWJ1bGEtdWx0aW1hL3RlbXBsYXRlcy9hY3Rvci9jaGFyYWN0ZXIvY2hhcmFjdGVyLWxpbWl0ZWQtc2hlZXQuaGJzXCI7XG4vLyBcdFx0aWYgKHRoaXMuYWN0b3JQcm9wZXJ0aWVzLnN1YnR5cGU/LnR5cGUgPT09IFwibnBjXCIpXG4vLyBcdFx0XHRyZXR1cm4gXCJzeXN0ZW1zL2ZhYnVsYS11bHRpbWEvdGVtcGxhdGVzL2FjdG9yL2NoYXJhY3Rlci9ucGMtc2hlZXQuaGJzXCI7XG4vLyBcdH1cbi8vXG4gIC8vXG5cdGFzeW5jIGdldERhdGEoKSB7XG5cdFx0bGV0IGFjdG9yRGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKTtcblx0XHQvLyBhY3RvckRhdGEgPSB0aGlzLmNvbXB1dGVTa2lsbHMoYWN0b3JEYXRhKTtcblx0XHQvLyBhY3RvckRhdGEgPSB0aGlzLmNvbXB1dGVFbmN1bWJyYW5jZShhY3RvckRhdGEpO1xuXG5cdFx0cmV0dXJuIGFjdG9yRGF0YTtcblx0fVxuXG59XG4vLyBcdGFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpIHtcbi8vIFx0XHRzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKTtcbi8vXG4vLyBcdFx0aHRtbC5maW5kKFwiLmNvbmRpdGlvblwiKS5jbGljayhhc3luYyAoZXYpID0+IHtcbi8vIFx0XHRcdGNvbnN0IGNvbmRpdGlvbk5hbWUgPSAkKGV2LmN1cnJlbnRUYXJnZXQpLmRhdGEoXCJjb25kaXRpb25cIik7XG4vLyBcdFx0XHR0aGlzLmFjdG9yLnRvZ2dsZUNvbmRpdGlvbihjb25kaXRpb25OYW1lKTtcbi8vIFx0XHRcdHRoaXMuX3JlbmRlcigpO1xuLy8gXHRcdH0pO1xuLy9cbi8vIFx0XHRodG1sLmZpbmQoXCIucm9sbC1hcm1vci5zcGVjaWZpY1wiKS5jbGljaygoZXYpID0+IHtcbi8vIFx0XHRcdGNvbnN0IGl0ZW1JZCA9ICQoZXYuY3VycmVudFRhcmdldCkuZGF0YShcIml0ZW1JZFwiKTtcbi8vIFx0XHRcdHRoaXMucm9sbFNwZWNpZmljQXJtb3IoaXRlbUlkKTtcbi8vIFx0XHR9KTtcbi8vXG4vLyBcdFx0aHRtbC5maW5kKFwiLnJvbGwtYXJtb3IudG90YWxcIikuY2xpY2soKCkgPT4gdGhpcy5yb2xsQXJtb3IoKSk7XG4vL1xuLy8gXHRcdGh0bWwuZmluZChcIi5yb2xsLWNvbnN1bWFibGVcIikuY2xpY2soKGV2KSA9PiB7XG4vLyBcdFx0XHRjb25zdCBjb25zdW1hYmxlID0gJChldi5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiY29uc3VtYWJsZVwiKTtcbi8vIFx0XHRcdHJldHVybiB0aGlzLnJvbGxDb25zdW1hYmxlKGNvbnN1bWFibGUpO1xuLy8gXHRcdH0pO1xuLy9cbi8vIFx0XHRodG1sLmZpbmQoXCIucm9sbC1yZXB1dGF0aW9uXCIpLmNsaWNrKCgpID0+IHRoaXMucm9sbFJlcHV0YXRpb24oKSk7XG4vL1xuLy8gXHRcdGh0bWwuZmluZChcIi5yb2xsLXByaWRlXCIpLmNsaWNrKCgpID0+IHRoaXMucm9sbFByaWRlKCkpO1xuLy9cbi8vIFx0XHRodG1sLmZpbmQoXCIuY3VycmVuY3ktYnV0dG9uXCIpLm9uKFwiY2xpY2sgY29udGV4dG1lbnVcIiwgKGV2KSA9PiB7XG4vLyBcdFx0XHRjb25zdCBjdXJyZW5jeSA9ICQoZXYuY3VycmVudFRhcmdldCkuZGF0YShcImN1cnJlbmN5XCIpO1xuLy8gXHRcdFx0Y29uc3Qgb3BlcmF0b3IgPSAkKGV2LmN1cnJlbnRUYXJnZXQpLmRhdGEoXCJvcGVyYXRvclwiKTtcbi8vIFx0XHRcdGNvbnN0IG1vZGlmaWVyID0gZXYudHlwZSA9PT0gXCJjb250ZXh0bWVudVwiID8gNSA6IDE7XG4vLyBcdFx0XHRsZXQgY29pbnMgPSBbXG4vLyBcdFx0XHRcdHRoaXMuYWN0b3IuYWN0b3JQcm9wZXJ0aWVzLmN1cnJlbmN5LmdvbGQudmFsdWUsXG4vLyBcdFx0XHRcdHRoaXMuYWN0b3IuYWN0b3JQcm9wZXJ0aWVzLmN1cnJlbmN5LnNpbHZlci52YWx1ZSxcbi8vIFx0XHRcdFx0dGhpcy5hY3Rvci5hY3RvclByb3BlcnRpZXMuY3VycmVuY3kuY29wcGVyLnZhbHVlLFxuLy8gXHRcdFx0XTtcbi8vIFx0XHRcdGxldCBpID0geyBnb2xkOiAwLCBzaWx2ZXI6IDEsIGNvcHBlcjogMiB9W2N1cnJlbmN5XTtcbi8vIFx0XHRcdGlmIChvcGVyYXRvciA9PT0gXCJwbHVzXCIpIHtcbi8vIFx0XHRcdFx0Y29pbnNbaV0gKz0gbW9kaWZpZXI7XG4vLyBcdFx0XHR9IGVsc2Uge1xuLy8gXHRcdFx0XHRjb2luc1tpXSAtPSBtb2RpZmllcjtcbi8vIFx0XHRcdFx0Zm9yICg7IGkgPj0gMDsgLS1pKSB7XG4vLyBcdFx0XHRcdFx0aWYgKGNvaW5zW2ldIDwgMCAmJiBpID4gMCkge1xuLy8gXHRcdFx0XHRcdFx0Y29pbnNbaSAtIDFdIC09IDE7XG4vLyBcdFx0XHRcdFx0XHRjb2luc1tpXSArPSAxMDtcbi8vIFx0XHRcdFx0XHR9XG4vLyBcdFx0XHRcdH1cbi8vIFx0XHRcdH1cbi8vIFx0XHRcdGlmIChjb2luc1swXSA+PSAwKSB7XG4vLyBcdFx0XHRcdHRoaXMuYWN0b3IudXBkYXRlKHtcbi8vIFx0XHRcdFx0XHRcInN5c3RlbS5jdXJyZW5jeS5nb2xkLnZhbHVlXCI6IGNvaW5zWzBdLFxuLy8gXHRcdFx0XHRcdFwic3lzdGVtLmN1cnJlbmN5LnNpbHZlci52YWx1ZVwiOiBjb2luc1sxXSxcbi8vIFx0XHRcdFx0XHRcInN5c3RlbS5jdXJyZW5jeS5jb3BwZXIudmFsdWVcIjogY29pbnNbMl0sXG4vLyBcdFx0XHRcdH0pO1xuLy8gXHRcdFx0fVxuLy8gXHRcdH0pO1xuLy8gXHR9XG4vL1xuLy8gXHQvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLy8gXHQvKioqICAgICAgICBDaGFyYWN0ZXIgU3BlY2lmaWMgUm9sbHMgICAgICAgICAgKioqL1xuLy8gXHQvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLy9cbi8vIFx0YXN5bmMgcm9sbENvbnN1bWFibGUoaWRlbnRpZmllcikge1xuLy8gXHRcdGNvbnN0IGNvbnN1bWFibGUgPSB0aGlzLmFjdG9yLmNvbnN1bWFibGVzW2lkZW50aWZpZXJdO1xuLy8gXHRcdGlmICghY29uc3VtYWJsZS52YWx1ZSkgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMud2Fybihsb2NhbGl6ZVN0cmluZyhcIldBUk5JTkcuTk9fQ09OU1VNQUJMRVwiKSk7XG4vLyBcdFx0Y29uc3Qgcm9sbE5hbWUgPSBsb2NhbGl6ZVN0cmluZyhjb25zdW1hYmxlLmxhYmVsKTtcbi8vIFx0XHRjb25zdCBkaWNlID0gQ09ORklHLmZibC5jb25zdW1hYmxlRGljZVtjb25zdW1hYmxlLnZhbHVlXTtcbi8vIFx0XHRjb25zdCBvcHRpb25zID0ge1xuLy8gXHRcdFx0bmFtZTogcm9sbE5hbWUudG9Mb3dlckNhc2UoKSxcbi8vIFx0XHRcdG1heFB1c2g6IFwiMFwiLFxuLy8gXHRcdFx0Y29uc3VtYWJsZTogaWRlbnRpZmllcixcbi8vIFx0XHRcdHR5cGU6IFwiY29uc3VtYWJsZVwiLFxuLy8gXHRcdFx0Li4udGhpcy5nZXRSb2xsT3B0aW9ucygpLFxuLy8gXHRcdH07XG4vLyBcdFx0Y29uc3Qgcm9sbCA9IEZCTFJvbGwuY3JlYXRlKGRpY2UgKyBgWyR7cm9sbE5hbWV9XWAsIHt9LCBvcHRpb25zKTtcbi8vIFx0XHRhd2FpdCByb2xsLnJvbGwoeyBhc3luYzogdHJ1ZSB9KTtcbi8vIFx0XHRjb25zdCBtZXNzYWdlID0gYXdhaXQgcm9sbC50b01lc3NhZ2UoKTtcbi8vIFx0XHRpZiAoTnVtYmVyKG1lc3NhZ2Uucm9sbC5yZXN1bHQpIDw9IChnYW1lLnNldHRpbmdzLmdldChcImZhYnVsYS11bHRpbWFcIiwgXCJhdXRvRGVjcmVhc2VDb25zdW1hYmxlXCIpIHx8IDApKSB7XG4vLyBcdFx0XHRGQkxSb2xsSGFuZGxlci5kZWNyZWFzZUNvbnN1bWFibGUobWVzc2FnZS5pZCk7XG4vLyBcdFx0fVxuLy8gXHR9XG4vL1xuLy8gXHRhc3luYyByb2xsUHJpZGUoKSB7XG4vLyBcdFx0aWYgKCF0aGlzLmFjdG9yLmNhbkFjdCkgdGhyb3cgdGhpcy5icm9rZW4oKTtcbi8vIFx0XHRjb25zdCBwcmlkZSA9IHRoaXMuYWN0b3IuYWN0b3JQcm9wZXJ0aWVzLmJpby5wcmlkZTtcbi8vIFx0XHRjb25zdCByb2xsTmFtZSA9IGxvY2FsaXplU3RyaW5nKHByaWRlLmxhYmVsKTtcbi8vIFx0XHRjb25zdCBvcHRpb25zID0ge1xuLy8gXHRcdFx0bmFtZTogcm9sbE5hbWUsXG4vLyBcdFx0XHRmbGF2b3I6IGA8c3BhbiBjbGFzcz1cImNoYXQtZmxhdm9yXCI+JHtwcmlkZS52YWx1ZX08L3NwYW4+YCxcbi8vIFx0XHRcdG1heFB1c2g6IFwiMFwiLFxuLy8gXHRcdFx0Li4udGhpcy5nZXRSb2xsT3B0aW9ucygpLFxuLy8gXHRcdH07XG4vLyBcdFx0Y29uc3Qgcm9sbCA9IEZCTFJvbGwuY3JlYXRlKENPTkZJRy5mYmwucHJpZGVEaWNlICsgYFske3JvbGxOYW1lfV1gLCB7fSwgb3B0aW9ucyk7XG4vLyBcdFx0YXdhaXQgcm9sbC5yb2xsKHsgYXN5bmM6IHRydWUgfSk7XG4vLyBcdFx0cmV0dXJuIHJvbGwudG9NZXNzYWdlKCk7XG4vLyBcdH1cbi8vXG4vLyBcdGFzeW5jIHJvbGxSZXB1dGF0aW9uKCkge1xuLy8gXHRcdGNvbnN0IHJlcHV0YXRpb24gPSB0aGlzLmFjdG9yLmFjdG9yUHJvcGVydGllcy5iaW8ucmVwdXRhdGlvbjtcbi8vIFx0XHRjb25zdCByb2xsTmFtZSA9IGxvY2FsaXplU3RyaW5nKHJlcHV0YXRpb24ubGFiZWwpO1xuLy8gXHRcdGNvbnN0IG9wdGlvbnMgPSB7XG4vLyBcdFx0XHRuYW1lOiByb2xsTmFtZSxcbi8vIFx0XHRcdGZsYXZvcjogYDxzcGFuIGNsYXNzPVwiY2hhdC1mbGF2b3JcIj4ke3JlcHV0YXRpb24udmFsdWV9PC9zcGFuPmAsXG4vLyBcdFx0XHRtYXhQdXNoOiBcIjBcIixcbi8vIFx0XHRcdC4uLnRoaXMuZ2V0Um9sbE9wdGlvbnMoKSxcbi8vIFx0XHR9O1xuLy8gXHRcdGNvbnN0IHJvbGwgPSBGQkxSb2xsLmNyZWF0ZShyZXB1dGF0aW9uLnZhbHVlICsgXCJkYlwiICsgYFske3JvbGxOYW1lfV1gLCB7fSwgb3B0aW9ucyk7XG4vLyBcdFx0YXdhaXQgcm9sbC5yb2xsKHsgYXN5bmM6IHRydWUgfSk7XG4vLyBcdFx0cmV0dXJuIHJvbGwudG9NZXNzYWdlKCk7XG4vLyBcdH1cbi8vXG4vLyBcdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vLyBcdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vL1xuLy8gXHRhc3luYyBfY2hhckdlbigpIHtcbi8vIFx0XHRjb25zdCBjaGFyZ2VuID0gYXdhaXQgbmV3IEZhYnVsYVVsdGltYUNoYXJhY3RlckdlbmVyYXRvcihcbi8vIFx0XHRcdGF3YWl0IEZhYnVsYVVsdGltYUNoYXJhY3RlckdlbmVyYXRvci5sb2FkRGF0YXNldCgpLFxuLy8gXHRcdFx0dGhpcy5hY3Rvcixcbi8vIFx0XHQpO1xuLy8gXHRcdHJldHVybiBjaGFyZ2VuLnJlbmRlcih0cnVlKTtcbi8vIFx0fVxuLy9cbi8vIFx0LyogT3ZlcnJpZGUgKi9cbi8vIFx0X29uQ29uZmlndXJlU2hlZXQoZXZlbnQpIHtcbi8vIFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuLy8gXHRcdG5ldyBBY3RvclNoZWV0Q29uZmlnKHRoaXMuYWN0b3IsIHtcbi8vIFx0XHRcdHRvcDogdGhpcy5wb3NpdGlvbi50b3AgKyA0MCxcbi8vIFx0XHRcdGxlZnQ6IHRoaXMucG9zaXRpb24ubGVmdCArICh0aGlzLnBvc2l0aW9uLndpZHRoIC0gNDAwKSAvIDIsXG4vLyBcdFx0fSkucmVuZGVyKHRydWUpO1xuLy8gXHR9XG4vL1xuLy8gXHRfZ2V0SGVhZGVyQnV0dG9ucygpIHtcbi8vIFx0XHRsZXQgYnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKCk7XG4vL1xuLy8gXHRcdGlmICh0aGlzLmFjdG9yLmlzT3duZXIpIHtcbi8vIFx0XHRcdGJ1dHRvbnMgPSBbXG4vLyBcdFx0XHRcdHtcbi8vIFx0XHRcdFx0XHRsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKFwiU0hFRVQuSEVBREVSLlJFU1RcIiksXG4vLyBcdFx0XHRcdFx0Y2xhc3M6IFwicmVzdC11cFwiLFxuLy8gXHRcdFx0XHRcdGljb246IFwiZmFzIGZhLWJlZFwiLFxuLy8gXHRcdFx0XHRcdG9uY2xpY2s6ICgpID0+IHRoaXMuYWN0b3IucmVzdCgpLFxuLy8gXHRcdFx0XHR9LFxuLy8gXHRcdFx0XHR7XG4vLyBcdFx0XHRcdFx0bGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZShcIlNIRUVULkhFQURFUi5ST0xMXCIpLFxuLy8gXHRcdFx0XHRcdGNsYXNzOiBcImN1c3RvbS1yb2xsXCIsXG4vLyBcdFx0XHRcdFx0aWNvbjogXCJmYXMgZmEtZGljZVwiLFxuLy8gXHRcdFx0XHRcdG9uY2xpY2s6ICgpID0+IHRoaXMucm9sbEFjdGlvbihcIkFDVElPTi5HRU5FUklDXCIpLFxuLy8gXHRcdFx0XHR9LFxuLy8gXHRcdFx0XHR7XG4vLyBcdFx0XHRcdFx0bGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZShcIlNIRUVULkhFQURFUi5DSEFSX0dFTlwiKSxcbi8vIFx0XHRcdFx0XHRjbGFzczogXCJjaGFyLWdlblwiLFxuLy8gXHRcdFx0XHRcdGljb246IFwiZmFzIGZhLWxlYWZcIixcbi8vIFx0XHRcdFx0XHRvbmNsaWNrOiBhc3luYyAoKSA9PiB7XG4vLyBcdFx0XHRcdFx0XHRjb25zdCBoYXNGaWxsZWRBdHRyaWJ1dGVzID0gT2JqZWN0LnZhbHVlcyh0aGlzLmFjdG9yLmFjdG9yUHJvcGVydGllcy5hdHRyaWJ1dGUpXG4vLyBcdFx0XHRcdFx0XHRcdC5mbGF0TWFwKChhKSA9PiBhLnZhbHVlICsgYS5tYXgpXG4vLyBcdFx0XHRcdFx0XHRcdC5zb21lKCh2KSA9PiB2ID4gMCk7XG4vL1xuLy8gXHRcdFx0XHRcdFx0aWYgKGhhc0ZpbGxlZEF0dHJpYnV0ZXMpIHtcbi8vIFx0XHRcdFx0XHRcdFx0RGlhbG9nLmNvbmZpcm0oe1xuLy8gXHRcdFx0XHRcdFx0XHRcdHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoXCJGTENHLlRJVExFXCIpLFxuLy8gXHRcdFx0XHRcdFx0XHRcdGNvbnRlbnQ6IGBcbi8vIFx0XHRcdFx0XHRcdFx0XHRcdDxoMSBzdHlsZT1cInRleHQtYWxpZ246IGNlbnRlcjtmb250LXdlaWdodDogNjAwOyBib3JkZXI6bm9uZTtcIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcIkZMQ0cuV0FSTklOR1wiKX08L2gxPlxuLy8gXHRcdFx0XHRcdFx0XHRcdFx0PHA+JHtnYW1lLmkxOG4ubG9jYWxpemUoXCJGTENHLldBUk5JTkdfREVTVFJVQ1RJVkVfRURJVFwiKX08L3A+PGhyLz5cbi8vIFx0XHRcdFx0XHRcdFx0XHRcdDxwPiR7Z2FtZS5pMThuLmxvY2FsaXplKFwiRkxDRy5XQVJOSU5HX0hJTlRcIil9PC9wPlxuLy8gXHRcdFx0XHRcdFx0XHRcdFx0PHAgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7XCI+PGI+JHtnYW1lLmkxOG4ubG9jYWxpemUoXCJGTENHLldBUk5JTkdfQVJFX1lPVV9TVVJFXCIpfTwvYj48L3A+XG4vLyBcdFx0XHRcdFx0XHRcdFx0XHQ8YnIvPmAsXG4vLyBcdFx0XHRcdFx0XHRcdFx0eWVzOiBhc3luYyAoKSA9PiBhd2FpdCB0aGlzLl9jaGFyR2VuKCksXG4vLyBcdFx0XHRcdFx0XHRcdFx0bm86ICgpID0+IHt9LFxuLy8gXHRcdFx0XHRcdFx0XHRcdGRlZmF1bHRZZXM6IGZhbHNlLFxuLy8gXHRcdFx0XHRcdFx0XHR9KTtcbi8vIFx0XHRcdFx0XHRcdH0gZWxzZSB7XG4vLyBcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuX2NoYXJHZW4oKTtcbi8vIFx0XHRcdFx0XHRcdH1cbi8vIFx0XHRcdFx0XHR9LFxuLy8gXHRcdFx0XHR9LFxuLy8gXHRcdFx0XS5jb25jYXQoYnV0dG9ucyk7XG4vLyBcdFx0fVxuLy9cbi8vIFx0XHRyZXR1cm4gYnV0dG9ucztcbi8vIFx0fVxuLy8gfVxuLy9cbiIsICIvLyBpbXBvcnQgeyBGQkxSb2xsSGFuZGxlciB9IGZyb20gXCJAY29tcG9uZW50cy9yb2xsLWVuZ2luZS9lbmdpbmVcIjtcbi8vIGltcG9ydCBsb2NhbGl6ZVN0cmluZyBmcm9tIFwiQHV0aWxzL2xvY2FsaXplLXN0cmluZ1wiO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuZXhwb3J0IGNsYXNzIEZhYnVsYVVsdGltYUFjdG9yU2hlZXQgZXh0ZW5kcyBBY3RvclNoZWV0IHtcbn1cbi8vIFx0YWx0SW50ZXJhY3Rpb24gPSBnYW1lLnNldHRpbmdzLmdldChcImZvcmJpZGRlbi1sYW5kc1wiLCBcImFsdGVybmF0aXZlU2t1bGxzXCIpO1xuLy8gXHR1c2VIZWFsdGhBbmRSZXNvbHZlID0gZ2FtZS5zZXR0aW5ncy5nZXQoXCJmb3JiaWRkZW4tbGFuZHNcIiwgXCJ1c2VIZWFsdGhBbmRSZXNvbHZlXCIpO1xuLy9cbi8vIFx0YXN5bmMgZ2V0RGF0YSgpIHtcbi8vIFx0XHRsZXQgZGF0YSA9IHRoaXMuYWN0b3IudG9PYmplY3QoKTtcbi8vIFx0XHRkYXRhID0gYXdhaXQgdGhpcy4jZW5yaWNoVGV4dEVkaXRvckZpZWxkcyhkYXRhKTtcbi8vIFx0XHRkYXRhLml0ZW1zID0gYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5hY3Rvci5pdGVtcy5tYXAoKGkpID0+IGkuc2hlZXQuZ2V0RGF0YSgpKSk7XG4vLyBcdFx0ZGF0YS5pdGVtcz8uc29ydCgoYSwgYikgPT4gKGEuc29ydCB8fCAwKSAtIChiLnNvcnQgfHwgMCkpO1xuLy8gXHRcdGRhdGEgPSB0aGlzLmNvbXB1dGVJdGVtcyhkYXRhKTtcbi8vIFx0XHRkYXRhLmNhcnJpZWRTdGF0ZXMgPSB0aGlzLiNnZXRDYXJyaWVkU3RhdGVzKCk7XG4vLyBcdFx0ZGF0YS5nZWFyID0gdGhpcy4jZmlsdGVyR2VhcihkYXRhLml0ZW1zKTtcbi8vIFx0XHRkYXRhLnN5c3RlbS51c2VIZWFsdGhBbmRSZXNvbHZlID0gdGhpcy51c2VIZWFsdGhBbmRSZXNvbHZlO1xuLy9cbi8vIFx0XHRyZXR1cm4gZGF0YTtcbi8vIFx0fVxuLy9cbi8vIFx0Z2V0IGFjdG9yRGF0YSgpIHtcbi8vIFx0XHRyZXR1cm4gdGhpcy5hY3Rvci5kYXRhO1xuLy8gXHR9XG4vL1xuLy8gXHRnZXQgYWN0b3JQcm9wZXJ0aWVzKCkge1xuLy8gXHRcdHJldHVybiB0aGlzLmFjdG9yLnN5c3RlbTtcbi8vIFx0fVxuLy9cbi8vIFx0Z2V0IHJvbGxEYXRhKCkge1xuLy8gXHRcdHJldHVybiB0aGlzLmFjdG9yLmdldFJvbGxEYXRhKCk7XG4vLyBcdH1cbi8vXG4vLyBcdGdldCBjb25maWcoKSB7XG4vLyBcdFx0cmV0dXJuIENPTkZJRy5mYmw7XG4vLyBcdH1cbi8vXG4vLyBcdC8qKlxuLy8gXHQgKiBAb3ZlcnJpZGVcbi8vIFx0ICogRXh0ZW5kcyB0aGUgc2hlZXQgZHJvcCBoYW5kbGVyIGZvciBzeXN0ZW0gc3BlY2lmaWMgdXNhZ2VzXG4vLyBcdCAqL1xuLy8gXHRhc3luYyBfb25Ecm9wKGV2ZW50LCBkYXRhKSB7XG4vLyBcdFx0bGV0IGRyYWdEYXRhID0gSlNPTi5wYXJzZShldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YShcInRleHQvcGxhaW5cIikpO1xuLy8gXHRcdGlmIChkcmFnRGF0YS50eXBlID09PSBcIml0ZW1Ecm9wXCIpIHtcbi8vIFx0XHRcdHRoaXMuYWN0b3IuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoXCJJdGVtXCIsIFtkcmFnRGF0YS5pdGVtXSk7XG4vLyBcdFx0fSBlbHNlIHtcbi8vIFx0XHRcdHN1cGVyLl9vbkRyb3AoZXZlbnQsIGRhdGEpO1xuLy8gXHRcdH1cbi8vIFx0fVxuLy9cbi8vIFx0YXN5bmMgX29uU29ydEl0ZW0oZXZlbnQsIGl0ZW1EYXRhKSB7XG4vLyBcdFx0Ly8gU29ydHMgaXRlbXMgaW4gdGhlIHZhcmlvdXMgY29udGFpbmVycyBieSBkcmFnIGFuZCBkcm9wXG4vLyBcdFx0bGV0IHN0YXRlID0gJChldmVudC50YXJnZXQpLmNsb3Nlc3QoXCJbZGF0YS1zdGF0ZV1cIik/LmRhdGEoXCJzdGF0ZVwiKTtcbi8vIFx0XHRpZiAoc3RhdGUgfHwgc3RhdGUgPT09IFwiXCIpIHtcbi8vIFx0XHRcdGF3YWl0IHRoaXMuYWN0b3IudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoXCJJdGVtXCIsIFtcbi8vIFx0XHRcdFx0e1xuLy8gXHRcdFx0XHRcdF9pZDogaXRlbURhdGEuX2lkLFxuLy8gXHRcdFx0XHRcdGZsYWdzOiB7IFwiZm9yYmlkZGVuLWxhbmRzXCI6IHsgc3RhdGU6IHN0YXRlID09PSBcIm5vbmVcIiA/IFwiXCIgOiBzdGF0ZSB9IH0sXG4vLyBcdFx0XHRcdH0sXG4vLyBcdFx0XHRdKTtcbi8vIFx0XHR9XG4vLyBcdFx0cmV0dXJuIHN1cGVyLl9vblNvcnRJdGVtKGV2ZW50LCBpdGVtRGF0YSk7XG4vLyBcdH1cbi8vXG4vLyBcdGFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpIHtcbi8vIFx0XHRzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKTtcbi8vIFx0XHRpZiAoIWdhbWUudXNlci5pc0dNICYmIHRoaXMuYWN0b3IubGltaXRlZCkgcmV0dXJuO1xuLy9cbi8vIFx0XHRodG1sLmZpbmQoXCIuaXRlbS1jcmVhdGVcIikuY2xpY2soKGV2KSA9PiB0aGlzLiNvbkl0ZW1DcmVhdGUoZXYpKTtcbi8vIFx0XHRodG1sLmZpbmQoXCIuY3JlYXRlLWRpYWxvZ1wiKS5jbGljaygoZXYpID0+IHtcbi8vIFx0XHRcdHRoaXMuI29uQ3JlYXRlRGlhbG9nKGV2KTtcbi8vIFx0XHR9KTtcbi8vXG4vLyBcdFx0Ly8gQXR0cmlidXRlIG1hcmtlcnNcbi8vIFx0XHRodG1sLmZpbmQoXCIuY2hhbmdlLWF0dHJpYnV0ZVwiKS5vbihcImNsaWNrIGNvbnRleHRtZW51XCIsIChldikgPT4ge1xuLy8gXHRcdFx0Y29uc3QgYXR0cmlidXRlTmFtZSA9ICQoZXYuY3VycmVudFRhcmdldCkuZGF0YShcImF0dHJpYnV0ZVwiKTtcbi8vIFx0XHRcdGNvbnN0IGF0dHJpYnV0ZSA9IHRoaXMuYWN0b3JQcm9wZXJ0aWVzLmF0dHJpYnV0ZVthdHRyaWJ1dGVOYW1lXTtcbi8vIFx0XHRcdGxldCB2YWx1ZSA9IGF0dHJpYnV0ZS52YWx1ZTtcbi8vIFx0XHRcdGlmICgoZXYudHlwZSA9PT0gXCJjbGlja1wiICYmICF0aGlzLmFsdEludGVyYWN0aW9uKSB8fCAoZXYudHlwZSA9PT0gXCJjb250ZXh0bWVudVwiICYmIHRoaXMuYWx0SW50ZXJhY3Rpb24pKSB7XG4vLyBcdFx0XHRcdHZhbHVlID0gTWF0aC5tYXgodmFsdWUgLSAxLCAwKTtcbi8vIFx0XHRcdH0gZWxzZSBpZiAoXG4vLyBcdFx0XHRcdChldi50eXBlID09PSBcImNvbnRleHRtZW51XCIgJiYgIXRoaXMuYWx0SW50ZXJhY3Rpb24pIHx8XG4vLyBcdFx0XHRcdChldi50eXBlID09PSBcImNsaWNrXCIgJiYgdGhpcy5hbHRJbnRlcmFjdGlvbilcbi8vIFx0XHRcdCkge1xuLy8gXHRcdFx0XHR2YWx1ZSA9IE1hdGgubWluKHZhbHVlICsgMSwgYXR0cmlidXRlLm1heCk7XG4vLyBcdFx0XHR9XG4vLyBcdFx0XHR0aGlzLmFjdG9yLnVwZGF0ZSh7XG4vLyBcdFx0XHRcdFtcInN5c3RlbS5hdHRyaWJ1dGUuXCIgKyBhdHRyaWJ1dGVOYW1lICsgXCIudmFsdWVcIl06IHZhbHVlLFxuLy8gXHRcdFx0fSk7XG4vLyBcdFx0fSk7XG4vL1xuLy8gXHRcdC8vIFdpbGxwb3dlciBtYXJrZXJzXG4vLyBcdFx0aHRtbC5maW5kKFwiLmNoYW5nZS13aWxscG93ZXJcIikub24oXCJjbGljayBjb250ZXh0bWVudVwiLCAoZXYpID0+IHtcbi8vIFx0XHRcdGNvbnN0IGF0dHJpYnV0ZSA9IHRoaXMuYWN0b3JQcm9wZXJ0aWVzLmJpby53aWxscG93ZXI7XG4vLyBcdFx0XHRsZXQgdmFsdWUgPSBhdHRyaWJ1dGUudmFsdWU7XG4vLyBcdFx0XHRpZiAoKGV2LnR5cGUgPT09IFwiY2xpY2tcIiAmJiAhdGhpcy5hbHRJbnRlcmFjdGlvbikgfHwgKGV2LnR5cGUgPT09IFwiY29udGV4dG1lbnVcIiAmJiB0aGlzLmFsdEludGVyYWN0aW9uKSkge1xuLy8gXHRcdFx0XHR2YWx1ZSA9IE1hdGgubWF4KHZhbHVlIC0gMSwgMCk7XG4vLyBcdFx0XHR9IGVsc2UgaWYgKFxuLy8gXHRcdFx0XHQoZXYudHlwZSA9PT0gXCJjb250ZXh0bWVudVwiICYmICF0aGlzLmFsdEludGVyYWN0aW9uKSB8fFxuLy8gXHRcdFx0XHQoZXYudHlwZSA9PT0gXCJjbGlja1wiICYmIHRoaXMuYWx0SW50ZXJhY3Rpb24pXG4vLyBcdFx0XHQpIHtcbi8vIFx0XHRcdFx0dmFsdWUgPSBNYXRoLm1pbih2YWx1ZSArIDEsIGF0dHJpYnV0ZS5tYXgpO1xuLy8gXHRcdFx0fVxuLy8gXHRcdFx0dGhpcy5hY3Rvci51cGRhdGUoeyBcInN5c3RlbS5iaW8ud2lsbHBvd2VyLnZhbHVlXCI6IHZhbHVlIH0pO1xuLy8gXHRcdH0pO1xuLy9cbi8vIFx0XHRodG1sLmZpbmQoXCIuY29udHJvbC1nZWFyXCIpLmNsaWNrKChldikgPT4ge1xuLy8gXHRcdFx0Y29uc3QgZGlyZWN0aW9uID0gJChldi5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiZGlyZWN0aW9uXCIpO1xuLy8gXHRcdFx0Y29uc3Qgb3Bwb3NpdGVEaXJlY3Rpb24gPSBkaXJlY3Rpb24gPT09IFwiY2FycmllZFwiID8gXCJcIiA6IFwiY2FycmllZFwiO1xuLy8gXHRcdFx0Y29uc3QgdXBkYXRlcyA9IHRoaXMuYWN0b3IuaXRlbXNcbi8vIFx0XHRcdFx0LmZpbHRlcigoaXRlbSkgPT4gQ09ORklHLmZibC5jYXJyaWVkSXRlbVR5cGVzLmluY2x1ZGVzKGl0ZW0udHlwZSkgJiYgaXRlbS5zdGF0ZSA9PT0gb3Bwb3NpdGVEaXJlY3Rpb24pXG4vLyBcdFx0XHRcdC5tYXAoKGl0ZW0pID0+IHtcbi8vIFx0XHRcdFx0XHRyZXR1cm4ge1xuLy8gXHRcdFx0XHRcdFx0X2lkOiBpdGVtLmlkLFxuLy8gXHRcdFx0XHRcdFx0ZmxhZ3M6IHsgXCJmb3JiaWRkZW4tbGFuZHNcIjogeyBzdGF0ZTogZGlyZWN0aW9uIH0gfSxcbi8vIFx0XHRcdFx0XHR9O1xuLy8gXHRcdFx0XHR9KTtcbi8vIFx0XHRcdHRoaXMuYWN0b3IudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoXCJJdGVtXCIsIHVwZGF0ZXMpO1xuLy8gXHRcdH0pO1xuLy9cbi8vIFx0XHRodG1sLmZpbmQoXCIuY29sbGFwc2UtdGFibGVcIikuY2xpY2soKGV2KSA9PiB7XG4vLyBcdFx0XHRjb25zdCBzdGF0ZSA9ICQoZXYuY3VycmVudFRhcmdldCkuY2xvc2VzdChcIltkYXRhLXN0YXRlXVwiKS5kYXRhKFwic3RhdGVcIik7XG4vLyBcdFx0XHR0aGlzLmFjdG9yLnNldEZsYWcoXG4vLyBcdFx0XHRcdFwiZm9yYmlkZGVuLWxhbmRzXCIsXG4vLyBcdFx0XHRcdGAke3N0YXRlfS1jb2xsYXBzZWRgLFxuLy8gXHRcdFx0XHQhdGhpcy5hY3Rvci5nZXRGbGFnKFwiZm9yYmlkZGVuLWxhbmRzXCIsIGAke3N0YXRlID8/IFwibm9uZVwifS1jb2xsYXBzZWRgKSxcbi8vIFx0XHRcdCk7XG4vLyBcdFx0fSk7XG4vL1xuLy8gXHRcdGh0bWwuZmluZChcIi5oZWFkZXItc29ydFwiKS5jbGljaygoZXYpID0+IHtcbi8vIFx0XHRcdGNvbnN0IHN0YXRlID0gJChldi5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KFwiW2RhdGEtc3RhdGVdXCIpLmRhdGEoXCJzdGF0ZVwiKTtcbi8vIFx0XHRcdGNvbnN0IHNvcnQgPSAkKGV2LmN1cnJlbnRUYXJnZXQpLmRhdGEoXCJzb3J0XCIpO1xuLy8gXHRcdFx0dGhpcy5hY3Rvci5zZXRGbGFnKFwiZm9yYmlkZGVuLWxhbmRzXCIsIGAke3N0YXRlID8/IFwibm9uZVwifS1zb3J0YCwgc29ydCk7XG4vLyBcdFx0fSk7XG4vL1xuLy8gXHRcdC8vIEl0ZW1zXG4vLyBcdFx0aHRtbC5maW5kKFwiLml0ZW0tZWRpdFwiKS5jbGljaygoZXYpID0+IHtcbi8vIFx0XHRcdGNvbnN0IGRpdiA9ICQoZXYuY3VycmVudFRhcmdldCkucGFyZW50cyhcIi5pdGVtXCIpO1xuLy8gXHRcdFx0Y29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGRpdi5kYXRhKFwiaXRlbUlkXCIpKTtcbi8vIFx0XHRcdGl0ZW0uc2hlZXQucmVuZGVyKHRydWUpO1xuLy8gXHRcdH0pO1xuLy9cbi8vIFx0XHRodG1sLmZpbmQoXCIuaXRlbS1kZWxldGVcIikuY2xpY2soKGV2KSA9PiB7XG4vLyBcdFx0XHRjb25zdCBkaXYgPSAkKGV2LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoXCIuaXRlbVwiKTtcbi8vIFx0XHRcdHRoaXMuYWN0b3IuZGVsZXRlRW1iZWRkZWREb2N1bWVudHMoXCJJdGVtXCIsIFtkaXYuZGF0YShcIml0ZW1JZFwiKV0pO1xuLy8gXHRcdFx0ZGl2LnNsaWRlVXAoMjAwLCAoKSA9PiB0aGlzLnJlbmRlcihmYWxzZSkpO1xuLy8gXHRcdH0pO1xuLy9cbi8vIFx0XHRodG1sLmZpbmQoXCIuaXRlbS1wb3N0XCIpLmNsaWNrKChldikgPT4ge1xuLy8gXHRcdFx0Y29uc3QgZGl2ID0gJChldi5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKFwiLml0ZW1cIik7XG4vLyBcdFx0XHRjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoZGl2LmRhdGEoXCJpdGVtSWRcIikpO1xuLy8gXHRcdFx0aXRlbS5zZW5kVG9DaGF0KCk7XG4vLyBcdFx0fSk7XG4vL1xuLy8gXHRcdGh0bWwuZmluZChcIi5jaGFuZ2UtaXRlbS1ib251c1wiKS5vbihcImNsaWNrIGNvbnRleHRtZW51XCIsIChldikgPT4ge1xuLy8gXHRcdFx0Y29uc3QgaXRlbUlkID0gJChldi5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiaXRlbUlkXCIpO1xuLy8gXHRcdFx0Y29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW1JZCk7XG4vLyBcdFx0XHRsZXQgdmFsdWUgPSBpdGVtLnN5c3RlbS5ib251cy52YWx1ZTtcbi8vIFx0XHRcdGlmICgoZXYudHlwZSA9PT0gXCJjbGlja1wiICYmICF0aGlzLmFsdEludGVyYWN0aW9uKSB8fCAoZXYudHlwZSA9PT0gXCJjb250ZXh0bWVudVwiICYmIHRoaXMuYWx0SW50ZXJhY3Rpb24pKSB7XG4vLyBcdFx0XHRcdHZhbHVlID0gTWF0aC5tYXgodmFsdWUgLSAxLCAwKTtcbi8vIFx0XHRcdH0gZWxzZSBpZiAoXG4vLyBcdFx0XHRcdChldi50eXBlID09PSBcImNvbnRleHRtZW51XCIgJiYgIXRoaXMuYWx0SW50ZXJhY3Rpb24pIHx8XG4vLyBcdFx0XHRcdChldi50eXBlID09PSBcImNsaWNrXCIgJiYgdGhpcy5hbHRJbnRlcmFjdGlvbilcbi8vIFx0XHRcdCkge1xuLy8gXHRcdFx0XHR2YWx1ZSA9IE1hdGgubWluKHZhbHVlICsgMSwgaXRlbS5pdGVtUHJvcGVydGllcy5ib251cy5tYXgpO1xuLy8gXHRcdFx0fVxuLy8gXHRcdFx0aXRlbS51cGRhdGUoe1xuLy8gXHRcdFx0XHRcInN5c3RlbS5ib251cy52YWx1ZVwiOiB2YWx1ZSxcbi8vIFx0XHRcdH0pO1xuLy8gXHRcdH0pO1xuLy9cbi8vIFx0XHQvLyBSb2xsc1xuLy8gXHRcdGh0bWwuZmluZChcIi5yb2xsLWF0dHJpYnV0ZVwiKS5jbGljaygoZXYpID0+IHtcbi8vIFx0XHRcdGNvbnN0IGF0dHJpYnV0ZU5hbWUgPSAkKGV2LmN1cnJlbnRUYXJnZXQpLmRhdGEoXCJhdHRyaWJ1dGVcIik7XG4vLyBcdFx0XHRyZXR1cm4gdGhpcy5yb2xsQXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpO1xuLy8gXHRcdH0pO1xuLy9cbi8vIFx0XHRodG1sLmZpbmQoXCIucm9sbC1za2lsbFwiKS5jbGljaygoZXYpID0+IHtcbi8vIFx0XHRcdGNvbnN0IHNraWxsTmFtZSA9ICQoZXYuY3VycmVudFRhcmdldCkuZGF0YShcInNraWxsXCIpO1xuLy8gXHRcdFx0cmV0dXJuIHRoaXMucm9sbFNraWxsKHNraWxsTmFtZSk7XG4vLyBcdFx0fSk7XG4vL1xuLy8gXHRcdGh0bWwuZmluZChcIi5yb2xsLXdlYXBvblwiKS5jbGljaygoZXYpID0+IHtcbi8vIFx0XHRcdGNvbnN0IGl0ZW1JZCA9ICQoZXYuY3VycmVudFRhcmdldCkuZGF0YShcIml0ZW1JZFwiKTtcbi8vIFx0XHRcdHJldHVybiB0aGlzLnJvbGxHZWFyKGl0ZW1JZCk7XG4vLyBcdFx0fSk7XG4vL1xuLy8gXHRcdGh0bWwuZmluZChcIi5yb2xsLXNwZWxsXCIpLmNsaWNrKChldikgPT4ge1xuLy8gXHRcdFx0Y29uc3QgaXRlbUlkID0gJChldi5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiaXRlbUlkXCIpO1xuLy8gXHRcdFx0cmV0dXJuIHRoaXMucm9sbFNwZWxsKGl0ZW1JZCk7XG4vLyBcdFx0fSk7XG4vL1xuLy8gXHRcdGh0bWwuZmluZChcIi5yb2xsLWFjdGlvblwiKS5jbGljaygoZXYpID0+IHtcbi8vIFx0XHRcdGNvbnN0IHJvbGxOYW1lID0gJChldi5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiYWN0aW9uXCIpO1xuLy8gXHRcdFx0Y29uc3QgaXRlbUlkID0gJChldi5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiaXRlbUlkXCIpO1xuLy8gXHRcdFx0cmV0dXJuIHRoaXMucm9sbEFjdGlvbihyb2xsTmFtZSwgaXRlbUlkID8gaXRlbUlkIDogbnVsbCk7XG4vLyBcdFx0fSk7XG4vL1xuLy8gXHRcdGh0bWwuZmluZChcIi5xdWFudGl0eVwiKS5vbihcImJsdXJcIiwgKGV2KSA9PiB7XG4vLyBcdFx0XHRjb25zdCBpdGVtSWQgPVxuLy8gXHRcdFx0XHRldi5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5kYXRhc2V0Lml0ZW1JZCA/P1xuLy8gXHRcdFx0XHRldi5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5pdGVtSWQ7XG4vLyBcdFx0XHRpZiAoIWl0ZW1JZCkge1xuLy8gXHRcdFx0XHR1aS5ub3RpZmljYXRpb25zLm5vdGlmeShcIkVSUk9SLk5PX0lEXCIsIFwiZXJyb3JcIiwgeyBsb2NhbGl6ZTogdHJ1ZSB9KTtcbi8vIFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiTm8gaXRlbSBpZCBmb3VuZFwiKTtcbi8vIFx0XHRcdH1cbi8vIFx0XHRcdHRoaXMuYWN0b3IudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoXCJJdGVtXCIsIFtcbi8vIFx0XHRcdFx0e1xuLy8gXHRcdFx0XHRcdF9pZDogaXRlbUlkLFxuLy8gXHRcdFx0XHRcdFwic3lzdGVtLnF1YW50aXR5XCI6IGV2LmN1cnJlbnRUYXJnZXQudmFsdWUsXG4vLyBcdFx0XHRcdH0sXG4vLyBcdFx0XHRdKTtcbi8vIFx0XHR9KTtcbi8vIFx0fVxuLy9cbi8vIFx0Y29tcHV0ZUVuY3VtYnJhbmNlKGRhdGEpIHtcbi8vIFx0XHRsZXQgd2VpZ2h0Q2FycmllZCA9IDA7XG4vL1xuLy8gXHRcdC8vIEdldCB0aGUgd2VpZ2h0IG9mIGFsbCBpdGVtc1xuLy8gXHRcdGZvciAobGV0IGl0ZW0gb2YgT2JqZWN0LnZhbHVlcyhkYXRhLml0ZW1zKSkge1xuLy8gXHRcdFx0d2VpZ2h0Q2FycmllZCArPSB0aGlzLmNvbXB1dGVJdGVtRW5jdW1icmFuY2UoaXRlbSk7XG4vLyBcdFx0fVxuLy9cbi8vIFx0XHRpZiAodGhpcy5hY3Rvci50eXBlID09PSBcImNoYXJhY3RlclwiKSB7XG4vLyBcdFx0XHQvLyBHZXQgdGhlIHdlaWdodCBvZiBhbGwgY29uc3VtYWJsZXNcbi8vIFx0XHRcdGZvciAobGV0IGNvbnN1bWFibGUgb2YgT2JqZWN0LnZhbHVlcyhkYXRhLnN5c3RlbS5jb25zdW1hYmxlKSkge1xuLy8gXHRcdFx0XHRpZiAoY29uc3VtYWJsZS52YWx1ZSA+IDApIHtcbi8vIFx0XHRcdFx0XHR3ZWlnaHRDYXJyaWVkICs9IDE7XG4vLyBcdFx0XHRcdH1cbi8vIFx0XHRcdH1cbi8vXG4vLyBcdFx0XHQvLyBHZXQgdGhlIHdlaWdodCBvZiBhbGwgY29pbnNcbi8vIFx0XHRcdGNvbnN0IGNvaW5zQ2FycmllZCA9XG4vLyBcdFx0XHRcdHBhcnNlSW50KGRhdGEuc3lzdGVtLmN1cnJlbmN5LmdvbGQudmFsdWUpICtcbi8vIFx0XHRcdFx0cGFyc2VJbnQoZGF0YS5zeXN0ZW0uY3VycmVuY3kuc2lsdmVyLnZhbHVlKSArXG4vLyBcdFx0XHRcdHBhcnNlSW50KGRhdGEuc3lzdGVtLmN1cnJlbmN5LmNvcHBlci52YWx1ZSk7XG4vLyBcdFx0XHR3ZWlnaHRDYXJyaWVkICs9IE1hdGguZmxvb3IoY29pbnNDYXJyaWVkIC8gMTAwKSAqIDAuNTtcbi8vIFx0XHR9XG4vL1xuLy8gXHRcdC8vIENhbGN1bGF0ZSBtYXggZW5jdW1icmFuY2Vcbi8vIFx0XHRjb25zdCBiYXNlRW5jdW1icmFuY2UgPSBkYXRhLnN5c3RlbS5hdHRyaWJ1dGUuc3RyZW5ndGgubWF4ICogMjtcbi8vIFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmVzdGVkLXRlcm5hcnlcbi8vIFx0XHRjb25zdCBtb25zdGVyRW5jdW1icmFuY2VNdWx0aXBsaWVyID0gdGhpcy5hY3Rvci50eXBlID09PSBcIm1vbnN0ZXJcIiA/IChkYXRhLnN5c3RlbS5pc01vdW50ZWQgPyAxIDogMikgOiAxO1xuLy9cbi8vIFx0XHRjb25zdCBtb2RpZmllcnMgPSB0aGlzLmFjdG9yLmdldFJvbGxNb2RpZmllck9wdGlvbnMoXCJjYXJyeWluZ0NhcGFjaXR5XCIpO1xuLy8gXHRcdGNvbnN0IHdlaWdodEFsbG93ZWQgPVxuLy8gXHRcdFx0YmFzZUVuY3VtYnJhbmNlICogbW9uc3RlckVuY3VtYnJhbmNlTXVsdGlwbGllciArXG4vLyBcdFx0XHQvLyBNb2lkaWZlcnNcbi8vIFx0XHRcdG1vZGlmaWVycy5yZWR1Y2UoKGFjYywgbSkgPT4gKGFjYyArPSBwYXJzZUludChtPy52YWx1ZSB8fCAwKSksIDApO1xuLy8gXHRcdGRhdGEuc3lzdGVtLmVuY3VtYnJhbmNlID0ge1xuLy8gXHRcdFx0dmFsdWU6IHdlaWdodENhcnJpZWQsXG4vLyBcdFx0XHRtYXg6IHdlaWdodEFsbG93ZWQsXG4vLyBcdFx0XHRvdmVyOiB3ZWlnaHRDYXJyaWVkID4gd2VpZ2h0QWxsb3dlZCxcbi8vIFx0XHR9O1xuLy8gXHRcdHJldHVybiBkYXRhO1xuLy8gXHR9XG4vL1xuLy8gXHRicm9rZW4odHlwZSkge1xuLy8gXHRcdGNvbnN0IG1zZyA9IHR5cGUgPT09IFwiaXRlbVwiID8gXCJXQVJOSU5HLklURU1fQlJPS0VOXCIgOiBcIldBUk5JTkcuQUNUT1JfQlJPS0VOXCI7XG4vLyBcdFx0Y29uc3QgbG9jbXNnID0gbG9jYWxpemVTdHJpbmcobXNnKTtcbi8vIFx0XHR1aS5ub3RpZmljYXRpb25zLndhcm4obG9jbXNnKTtcbi8vIFx0XHRyZXR1cm4gbmV3IEVycm9yKGxvY21zZyk7XG4vLyBcdH1cbi8vXG4vLyBcdGdldFJvbGxPcHRpb25zKC4uLnJvbGxJZGVudGlmaWVycykge1xuLy8gXHRcdHJldHVybiB7XG4vLyBcdFx0XHQuLi50aGlzLnJvbGxEYXRhLFxuLy8gXHRcdFx0bW9kaWZpZXJzOiB0aGlzLmFjdG9yLmdldFJvbGxNb2RpZmllck9wdGlvbnMoLi4ucm9sbElkZW50aWZpZXJzKSxcbi8vIFx0XHR9O1xuLy8gXHR9XG4vL1xuLy8gXHRnZXRBdHRyaWJ1dGUoaWRlbnRpZmllcikge1xuLy8gXHRcdGNvbnN0IGF0dHJpYnV0ZU5hbWUgPSBDT05GSUcuZmJsLnNraWxsQXR0cmlidXRlTWFwW2lkZW50aWZpZXJdIHx8IGlkZW50aWZpZXI7XG4vLyBcdFx0Y29uc3QgYXR0cmlidXRlID0gdGhpcy5hY3Rvci5hdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdO1xuLy8gXHRcdGlmICghYXR0cmlidXRlKSByZXR1cm4ge307XG4vLyBcdFx0cmV0dXJuIHtcbi8vIFx0XHRcdG5hbWU6IGF0dHJpYnV0ZU5hbWUsXG4vLyBcdFx0XHQuLi5hdHRyaWJ1dGUsXG4vLyBcdFx0fTtcbi8vIFx0fVxuLy9cbi8vIFx0Z2V0U2tpbGwoaWRlbnRpZmllcikge1xuLy8gXHRcdGNvbnN0IHNraWxsTmFtZSA9IENPTkZJRy5mYmwuYWN0aW9uU2tpbGxNYXBbaWRlbnRpZmllcl0gfHwgaWRlbnRpZmllcjtcbi8vIFx0XHRjb25zdCBza2lsbCA9IHRoaXMuYWN0b3Iuc2tpbGxzW3NraWxsTmFtZV07XG4vLyBcdFx0aWYgKCFza2lsbCkgcmV0dXJuIHt9O1xuLy8gXHRcdGNvbnN0IGF0dHJpYnV0ZSA9IHRoaXMuZ2V0QXR0cmlidXRlKHNraWxsTmFtZSk7XG4vLyBcdFx0cmV0dXJuIHtcbi8vIFx0XHRcdHNraWxsOiB7IG5hbWU6IHNraWxsTmFtZSwgLi4uc2tpbGwgfSxcbi8vIFx0XHRcdGF0dHJpYnV0ZTogeyAuLi5hdHRyaWJ1dGUgfSxcbi8vIFx0XHR9O1xuLy8gXHR9XG4vL1xuLy8gXHRnZXRHZWFycygpIHtcbi8vIFx0XHRyZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0udHlwZSA9PT0gXCJnZWFyXCIgJiYgIWl0ZW0uaXNCcm9rZW4pO1xuLy8gXHR9XG4vL1xuLy8gXHRnZXRHZWFyKGl0ZW1JZCkge1xuLy8gXHRcdGNvbnN0IGdlYXIgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtSWQpLmdldFJvbGxEYXRhKCk7XG4vLyBcdFx0aWYgKGdlYXIuaXNCcm9rZW4pIHRocm93IHRoaXMuYnJva2VuKFwiaXRlbVwiKTtcbi8vIFx0XHRjb25zdCBwcm9wZXJ0aWVzID0gdGhpcy5nZXRTa2lsbChDT05GSUcuZmJsLmFjdGlvblNraWxsTWFwW2dlYXIuY2F0ZWdvcnldIHx8IFwibWVsZWVcIik7XG4vL1xuLy8gXHRcdHJldHVybiB7XG4vLyBcdFx0XHRnZWFyOiBnZWFyLFxuLy8gXHRcdFx0Li4ucHJvcGVydGllcyxcbi8vIFx0XHR9O1xuLy8gXHR9XG4vL1xuLy8gXHQvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLy8gXHQvKioqICAgICAgICAgICAgICAgQWN0b3IgUm9sbHMgICAgICAgICAgICAgICAgKioqL1xuLy8gXHQvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLy9cbi8vIFx0cm9sbEFjdGlvbihhY3Rpb25OYW1lLCBpdGVtSWQgPSB1bmRlZmluZWQpIHtcbi8vIFx0XHRpZiAoIXRoaXMuYWN0b3IuY2FuQWN0KSB0aHJvdyB0aGlzLmJyb2tlbigpO1xuLy9cbi8vIFx0XHRjb25zdCBwcm9wZXJ0aWVzID0gaXRlbUlkID8gdGhpcy5nZXRHZWFyKGl0ZW1JZCkgOiB0aGlzLmdldFNraWxsKGFjdGlvbk5hbWUpO1xuLy8gXHRcdGNvbnN0IGRhdGEgPSB7XG4vLyBcdFx0XHR0aXRsZTogYWN0aW9uTmFtZSxcbi8vIFx0XHRcdC4uLnByb3BlcnRpZXMsXG4vLyBcdFx0fTtcbi8vIFx0XHRpZiAoaXRlbUlkKSBkZWxldGUgZGF0YS5nZWFyLmRhbWFnZTtcbi8vIFx0XHRjb25zdCBvcHRpb25zID0ge1xuLy8gXHRcdFx0Li4udGhpcy5nZXRSb2xsT3B0aW9ucyhhY3Rpb25OYW1lLCBkYXRhLnNraWxsPy5uYW1lLCBkYXRhLmF0dHJpYnV0ZT8ubmFtZSwgZGF0YS5nZWFyPy5pdGVtSWQpLFxuLy8gXHRcdH07XG4vLyBcdFx0aWYgKGFjdGlvbk5hbWUgPT09IFwidW5hcm1lZFwiKSBvcHRpb25zLmRhbWFnZSA9IDE7XG4vLyBcdFx0cmV0dXJuIEZCTFJvbGxIYW5kbGVyLmNyZWF0ZVJvbGwoZGF0YSwgeyAuLi5vcHRpb25zLCBnZWFyczogdGhpcy5nZXRHZWFycygpIH0pO1xuLy8gXHR9XG4vL1xuLy8gXHRyb2xsQXJtb3IoKSB7XG4vLyBcdFx0Y29uc3Qgcm9sbE5hbWUgPSBgJHtsb2NhbGl6ZVN0cmluZyhcIklURU0uVHlwZUFybW9yXCIpfTogJHtsb2NhbGl6ZVN0cmluZyhcIkFSTU9SLlRPVEFMXCIpfWA7XG4vLyBcdFx0Y29uc3QgaWRlbnRpZmllcnMgPSBbXCJhcm1vclwiXTtcbi8vIFx0XHRjb25zdCBhcnRpZmFjdERpZXMgPSBbXTtcbi8vIFx0XHRjb25zdCB0b3RhbEFybW9yID0gdGhpcy5hY3Rvci5pdGVtVHlwZXMuYXJtb3IucmVkdWNlKChzdW0sIGFybW9yKSA9PiB7XG4vLyBcdFx0XHRpZiAoYXJtb3IuaXRlbVByb3BlcnRpZXMucGFydCA9PT0gXCJzaGllbGRcIiB8fCBhcm1vci5zdGF0ZSAhPT0gXCJlcXVpcHBlZFwiKSByZXR1cm4gc3VtO1xuLy8gXHRcdFx0Y29uc3Qgcm9sbERhdGEgPSBhcm1vci5nZXRSb2xsRGF0YSgpO1xuLy8gXHRcdFx0aWYgKHJvbGxEYXRhLmlzQnJva2VuKSB0aHJvdyB0aGlzLmJyb2tlbihcIml0ZW1cIik7XG4vLyBcdFx0XHRjb25zdCB2YWx1ZSA9IGFybW9yLml0ZW1Qcm9wZXJ0aWVzLmJvbnVzLnZhbHVlO1xuLy8gXHRcdFx0aWYgKHJvbGxEYXRhLmFydGlmYWN0RGllKSBhcnRpZmFjdERpZXMucHVzaChyb2xsRGF0YS5hcnRpZmFjdERpZSk7XG4vLyBcdFx0XHRpZGVudGlmaWVycy5wdXNoKGFybW9yLmlkKTtcbi8vIFx0XHRcdHJldHVybiBzdW0gKyB2YWx1ZTtcbi8vIFx0XHR9LCAwKTtcbi8vIFx0XHRpZiAoIXRvdGFsQXJtb3IpIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4obG9jYWxpemVTdHJpbmcoXCJXQVJOSU5HLk5PX0FSTU9SXCIpKTtcbi8vXG4vLyBcdFx0Y29uc3QgZGF0YSA9IHtcbi8vIFx0XHRcdHRpdGxlOiByb2xsTmFtZSxcbi8vIFx0XHRcdGdlYXI6IHtcbi8vIFx0XHRcdFx0bGFiZWw6IGxvY2FsaXplU3RyaW5nKFwiSVRFTS5UeXBlQXJtb3JcIiksXG4vLyBcdFx0XHRcdG5hbWU6IGxvY2FsaXplU3RyaW5nKFwiSVRFTS5UeXBlQXJtb3JcIiksXG4vLyBcdFx0XHRcdHZhbHVlOiB0b3RhbEFybW9yLFxuLy8gXHRcdFx0XHRhcnRpZmFjdERpZTogYXJ0aWZhY3REaWVzLmpvaW4oXCIrXCIpLFxuLy8gXHRcdFx0fSxcbi8vIFx0XHR9O1xuLy8gXHRcdGNvbnN0IG9wdGlvbnMgPSB7XG4vLyBcdFx0XHRtYXhQdXNoOiBcIjBcIixcbi8vIFx0XHRcdC4uLnRoaXMuZ2V0Um9sbE9wdGlvbnMoLi4uaWRlbnRpZmllcnMpLFxuLy8gXHRcdH07XG4vL1xuLy8gXHRcdHJldHVybiBGQkxSb2xsSGFuZGxlci5jcmVhdGVSb2xsKGRhdGEsIHsgLi4ub3B0aW9ucywgZ2VhcnM6IHRoaXMuZ2V0R2VhcnMoKSB9KTtcbi8vIFx0fVxuLy9cbi8vIFx0cm9sbFNwZWNpZmljQXJtb3IoYXJtb3JJZCkge1xuLy8gXHRcdGNvbnN0IHJvbGxEYXRhID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoYXJtb3JJZCkuZ2V0Um9sbERhdGEoKTtcbi8vIFx0XHRjb25zdCByb2xsTmFtZSA9IGAke2xvY2FsaXplU3RyaW5nKFwiSVRFTS5UeXBlQXJtb3JcIil9OiAke3JvbGxEYXRhLm5hbWV9YDtcbi8vIFx0XHRpZiAocm9sbERhdGEuaXNCcm9rZW4pIHRocm93IHRoaXMuYnJva2VuKFwiaXRlbVwiKTtcbi8vXG4vLyBcdFx0Y29uc3QgZGF0YSA9IHtcbi8vIFx0XHRcdHRpdGxlOiByb2xsTmFtZSxcbi8vIFx0XHRcdGdlYXI6IHJvbGxEYXRhLFxuLy8gXHRcdH07XG4vLyBcdFx0Y29uc3Qgb3B0aW9ucyA9IHtcbi8vIFx0XHRcdG1heFB1c2g6IFwiMFwiLFxuLy8gXHRcdFx0Li4udGhpcy5nZXRSb2xsT3B0aW9ucyhcImFybW9yXCIsIGFybW9ySWQpLFxuLy8gXHRcdH07XG4vLyBcdFx0cmV0dXJuIEZCTFJvbGxIYW5kbGVyLmNyZWF0ZVJvbGwoZGF0YSwgeyAuLi5vcHRpb25zLCBnZWFyczogdGhpcy5nZXRHZWFycygpIH0pO1xuLy8gXHR9XG4vL1xuLy8gXHRyb2xsQXR0cmlidXRlKGF0dHJOYW1lKSB7XG4vLyBcdFx0aWYgKCF0aGlzLmFjdG9yLmNhbkFjdCkgdGhyb3cgdGhpcy5icm9rZW4oKTtcbi8vXG4vLyBcdFx0Y29uc3QgZGF0YSA9IHtcbi8vIFx0XHRcdHRpdGxlOiBhdHRyTmFtZSxcbi8vIFx0XHRcdGF0dHJpYnV0ZTogdGhpcy5nZXRBdHRyaWJ1dGUoYXR0ck5hbWUpLFxuLy8gXHRcdH07XG4vLyBcdFx0Y29uc3Qgb3B0aW9ucyA9IHtcbi8vIFx0XHRcdC4uLnRoaXMuZ2V0Um9sbE9wdGlvbnMoYXR0ck5hbWUpLFxuLy8gXHRcdH07XG4vLyBcdFx0cmV0dXJuIEZCTFJvbGxIYW5kbGVyLmNyZWF0ZVJvbGwoZGF0YSwgeyAuLi5vcHRpb25zLCBnZWFyczogdGhpcy5nZXRHZWFycygpIH0pO1xuLy8gXHR9XG4vL1xuLy8gXHRyb2xsR2VhcihpdGVtSWQpIHtcbi8vIFx0XHRpZiAoIXRoaXMuYWN0b3IuY2FuQWN0KSB0aHJvdyB0aGlzLmJyb2tlbigpO1xuLy9cbi8vIFx0XHRjb25zdCBwcm9wZXJ0aWVzID0gdGhpcy5nZXRHZWFyKGl0ZW1JZCk7XG4vLyBcdFx0Y29uc3QgZGF0YSA9IHtcbi8vIFx0XHRcdHRpdGxlOiBwcm9wZXJ0aWVzLmdlYXIubmFtZSxcbi8vIFx0XHRcdC4uLnByb3BlcnRpZXMsXG4vLyBcdFx0fTtcbi8vIFx0XHRjb25zdCBvcHRpb25zID0ge1xuLy8gXHRcdFx0Li4udGhpcy5nZXRSb2xsT3B0aW9ucyhkYXRhLnNraWxsPy5uYW1lLCBkYXRhLmF0dHJpYnV0ZT8ubmFtZSwgZGF0YS5nZWFyLml0ZW1JZCksXG4vLyBcdFx0fTtcbi8vIFx0XHRyZXR1cm4gRkJMUm9sbEhhbmRsZXIuY3JlYXRlUm9sbChkYXRhLCB7IC4uLm9wdGlvbnMsIGdlYXJzOiB0aGlzLmdldEdlYXJzKCkgfSk7XG4vLyBcdH1cbi8vXG4vLyBcdHJvbGxTa2lsbChza2lsbE5hbWUpIHtcbi8vIFx0XHRpZiAoIXRoaXMuYWN0b3IuY2FuQWN0KSB0aHJvdyB0aGlzLmJyb2tlbigpO1xuLy9cbi8vIFx0XHRjb25zdCBkYXRhID0ge1xuLy8gXHRcdFx0dGl0bGU6IHNraWxsTmFtZSxcbi8vIFx0XHRcdC4uLnRoaXMuZ2V0U2tpbGwoc2tpbGxOYW1lKSxcbi8vIFx0XHR9O1xuLy8gXHRcdGNvbnN0IG9wdGlvbnMgPSB7XG4vLyBcdFx0XHQuLi50aGlzLmdldFJvbGxPcHRpb25zKHNraWxsTmFtZSwgZGF0YS5hdHRyaWJ1dGU/Lm5hbWUpLFxuLy8gXHRcdH07XG4vLyBcdFx0cmV0dXJuIEZCTFJvbGxIYW5kbGVyLmNyZWF0ZVJvbGwoZGF0YSwgeyAuLi5vcHRpb25zLCBnZWFyczogdGhpcy5nZXRHZWFycygpIH0pO1xuLy8gXHR9XG4vL1xuLy8gXHRyb2xsU3BlbGwoc3BlbGxJZCkge1xuLy8gXHRcdGlmICghdGhpcy5hY3Rvci5jYW5BY3QpIHRocm93IHRoaXMuYnJva2VuKCk7XG4vLyBcdFx0aWYgKCF0aGlzLmFjdG9yLndpbGxwb3dlci52YWx1ZSAmJiAhdGhpcy5hY3RvclByb3BlcnRpZXMuc3VidHlwZT8udHlwZSA9PT0gXCJucGNcIilcbi8vIFx0XHRcdHRocm93IHVpLm5vdGlmaWNhdGlvbnMud2Fybihsb2NhbGl6ZVN0cmluZyhcIldBUk5JTkcuTk9fV0lMTFBPV0VSXCIpKTtcbi8vXG4vLyBcdFx0Y29uc3Qgc3BlbGwgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChzcGVsbElkKTtcbi8vIFx0XHRsZXQgeyB2YWx1ZSB9ID0gZHVwbGljYXRlKHRoaXMuYWN0b3Iud2lsbHBvd2VyKTtcbi8vIFx0XHRjb25zdCBoYXNQc3ljaCA9ICEhdGhpcy5hY3Rvci5pdGVtcy5nZXROYW1lKFwiUHN5Y2hpYyBQb3dlciAoSGFsZi1FbGYpXCIpO1xuLy9cbi8vIFx0XHRjb25zdCBkYXRhID0ge1xuLy8gXHRcdFx0dGl0bGU6IHNwZWxsLm5hbWUsXG4vLyBcdFx0XHRhdHRyaWJ1dGU6IHtcbi8vIFx0XHRcdFx0bmFtZTogc3BlbGwubmFtZSxcbi8vIFx0XHRcdFx0dmFsdWU6IDEsXG4vLyBcdFx0XHR9LFxuLy8gXHRcdFx0c3BlbGw6IHtcbi8vIFx0XHRcdFx0d2lsbHBvd2VyOiB7IG1heDogLS12YWx1ZSwgdmFsdWU6IHZhbHVlIH0sXG4vLyBcdFx0XHRcdHBzeWNoOiBoYXNQc3ljaCxcbi8vIFx0XHRcdFx0aXRlbTogc3BlbGwsXG4vLyBcdFx0XHR9LFxuLy8gXHRcdH07XG4vL1xuLy8gXHRcdC8vIE5QQ3Mgc2hvdWxkbid0IGhhdmUgYSByZXN0cmFpbnQgb24gd2lsbHBvd2VyLlxuLy8gXHRcdGlmICh0aGlzLmFjdG9yUHJvcGVydGllcy5zdWJ0eXBlPy50eXBlID09PSBcIm5wY1wiKVxuLy8gXHRcdFx0ZGF0YS5zcGVsbC53aWxscG93ZXIgPSB7XG4vLyBcdFx0XHRcdG1heDogOSxcbi8vIFx0XHRcdFx0dmFsdWU6IDksXG4vLyBcdFx0XHR9O1xuLy9cbi8vIFx0XHRjb25zdCBvcHRpb25zID0ge1xuLy8gXHRcdFx0bWF4UHVzaDogXCIwXCIsXG4vLyBcdFx0XHR0ZW1wbGF0ZTogXCJzeXN0ZW1zL2ZvcmJpZGRlbi1sYW5kcy90ZW1wbGF0ZXMvY29tcG9uZW50cy9yb2xsLWVuZ2luZS9zcGVsbC1kaWFsb2cuaGJzXCIsXG4vLyBcdFx0XHR0eXBlOiBcInNwZWxsXCIsXG4vLyBcdFx0XHRza3VsbHM6IHRoaXMuYWx0SW50ZXJhY3Rpb24sXG4vLyBcdFx0XHQuLi50aGlzLmdldFJvbGxPcHRpb25zKCksXG4vLyBcdFx0fTtcbi8vIFx0XHRyZXR1cm4gRkJMUm9sbEhhbmRsZXIuY3JlYXRlUm9sbChkYXRhLCB7IC4uLm9wdGlvbnMsIGdlYXJzOiB0aGlzLmdldEdlYXJzKCkgfSk7XG4vLyBcdH1cbi8vXG4vLyBcdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vLyBcdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vL1xuLy8gXHRhc3luYyBfcmVuZGVySW5uZXIoZGF0YSwgb3B0aW9ucykge1xuLy8gXHRcdGRhdGEuYWx0ZXJuYXRpdmVTa3VsbHMgPSB0aGlzLmFsdEludGVyYWN0aW9uO1xuLy8gXHRcdHJldHVybiBzdXBlci5fcmVuZGVySW5uZXIoZGF0YSwgb3B0aW9ucyk7XG4vLyBcdH1cbi8vXG4vLyBcdGNvbXB1dGVTa2lsbHMoZGF0YSkge1xuLy8gXHRcdGZvciAobGV0IHNraWxsIG9mIE9iamVjdC52YWx1ZXMoZGF0YS5zeXN0ZW0uc2tpbGwpKSB7XG4vLyBcdFx0XHRza2lsbFtgaGFzJHtza2lsbD8uYXR0cmlidXRlPy5jYXBpdGFsaXplKCl9YF0gPSBmYWxzZTtcbi8vIFx0XHRcdGlmIChDT05GSUcuZmJsLmF0dHJpYnV0ZXMuaW5jbHVkZXMoc2tpbGwuYXR0cmlidXRlKSkgc2tpbGxbYGhhcyR7c2tpbGwuYXR0cmlidXRlLmNhcGl0YWxpemUoKX1gXSA9IHRydWU7XG4vLyBcdFx0fVxuLy8gXHRcdHJldHVybiBkYXRhO1xuLy8gXHR9XG4vL1xuLy8gXHRjb21wdXRlSXRlbXMoZGF0YSkge1xuLy8gXHRcdGZvciAoY29uc3QgaXRlbSBvZiBPYmplY3QudmFsdWVzKGRhdGEuaXRlbXMpKSB7XG4vLyBcdFx0XHQvLyBTaGllbGRzIHdlcmUgbG9uZyB0cmVhdGVkIGFzIGFybW9yLiBUaGV5IGFyZSBub3QuIFRoaXMgaXMgYSB3b3JrYXJvdW5kIGZvciB0aGF0LlxuLy8gXHRcdFx0aWYgKGl0ZW0uc3lzdGVtLnBhcnQgPT09IFwic2hpZWxkXCIpIGl0ZW0uaXNXZWFwb24gPSB0cnVlO1xuLy8gXHRcdFx0ZWxzZSBpZiAoQ09ORklHLmZibC5pdGVtVHlwZXMuaW5jbHVkZXMoaXRlbS50eXBlKSkgaXRlbVtgaXMke2l0ZW0udHlwZS5jYXBpdGFsaXplKCl9YF0gPSB0cnVlO1xuLy8gXHRcdFx0aXRlbS5pc0VxdWlwcGVkID0gaXRlbS5mbGFncz8uc3RhdGUgPT09IFwiZXF1aXBwZWRcIjtcbi8vIFx0XHRcdGl0ZW0uaXNDYXJyaWVkID0gaXRlbS5mbGFncz8uc3RhdGUgPT09IFwiY2FycmllZFwiO1xuLy8gXHRcdH1cbi8vIFx0XHRyZXR1cm4gZGF0YTtcbi8vIFx0fVxuLy9cbi8vIFx0Y29tcHV0ZUl0ZW1FbmN1bWJyYW5jZShkYXRhKSB7XG4vLyBcdFx0Y29uc3QgdHlwZSA9IGRhdGEudHlwZTtcbi8vIFx0XHRjb25zdCB3ZWlnaHQgPSBpc05hTihOdW1iZXIoZGF0YT8uc3lzdGVtLndlaWdodCkpXG4vLyBcdFx0XHQ/IHRoaXMuY29uZmlnLmVuY3VtYnJhbmNlW2RhdGE/LnN5c3RlbS53ZWlnaHRdID8/IDFcbi8vIFx0XHRcdDogTnVtYmVyKGRhdGE/LnN5c3RlbS53ZWlnaHQpID8/IDE7XG4vLyBcdFx0Ly8gSWYgdGhlIGl0ZW0gaXNuJ3QgY2FycmllZCBvciBlcXVpcHBlZCwgZG9uJ3QgY291bnQgaXQuXG4vLyBcdFx0aWYgKCFkYXRhLmZsYWdzPy5zdGF0ZSkgcmV0dXJuIDA7XG4vLyBcdFx0Ly8gT25seSByZXR1cm4gd2VpZ2h0IGZvciB0aGVzZSB0eXBlcy5cbi8vIFx0XHRpZiAodHlwZSA9PT0gXCJyYXdNYXRlcmlhbFwiKSByZXR1cm4gMSAqIE51bWJlcihkYXRhLnN5c3RlbS5xdWFudGl0eSk7XG4vLyBcdFx0aWYgKFtcImdlYXJcIiwgXCJhcm1vclwiLCBcIndlYXBvblwiXS5pbmNsdWRlcyh0eXBlKSkgcmV0dXJuIHdlaWdodDtcbi8vIFx0XHQvLyBUYWxlbnRzLCBTcGVsbHMsIGFuZCB0aGUgbGlrZSBkb250IGhhdmUgd2VpZ2h0LlxuLy8gXHRcdHJldHVybiAwO1xuLy8gXHR9XG4vL1xuLy8gXHRhc3luYyAjZW5yaWNoVGV4dEVkaXRvckZpZWxkcyhkYXRhKSB7XG4vLyBcdFx0Y29uc3QgZmllbGRzID0gQ09ORklHLmZibC5lbnJpY2hlZEFjdG9yRmllbGRzO1xuLy8gXHRcdGZvciAoY29uc3QgZmllbGQgb2YgZmllbGRzKVxuLy8gXHRcdFx0aWYgKGRhdGEuc3lzdGVtLmJpbz8uW2ZpZWxkXT8udmFsdWUpXG4vLyBcdFx0XHRcdGRhdGEuc3lzdGVtLmJpb1tmaWVsZF0udmFsdWUgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoZGF0YS5zeXN0ZW0uYmlvW2ZpZWxkXS52YWx1ZSwge1xuLy8gXHRcdFx0XHRcdGFzeW5jOiB0cnVlLFxuLy8gXHRcdFx0XHR9KTtcbi8vIFx0XHRyZXR1cm4gZGF0YTtcbi8vIFx0fVxuLy9cbi8vIFx0I2dldENhcnJpZWRTdGF0ZXMoKSB7XG4vLyBcdFx0Y29uc3QgY2FycnJpZWRTdGF0ZXMgPSBDT05GSUcuZmJsLmNhcnJpZWRTdGF0ZXM7XG4vLyBcdFx0cmV0dXJuIGNhcnJyaWVkU3RhdGVzLm1hcCgoc3RhdGUpID0+IHtcbi8vIFx0XHRcdHJldHVybiB7XG4vLyBcdFx0XHRcdG5hbWU6IHN0YXRlLFxuLy8gXHRcdFx0XHRjb2xsYXBzZWQ6IHRoaXMuYWN0b3IuZ2V0RmxhZyhcImZvcmJpZGRlbi1sYW5kc1wiLCBgJHtzdGF0ZX0tY29sbGFwc2VkYCksXG4vLyBcdFx0XHR9O1xuLy8gXHRcdH0pO1xuLy8gXHR9XG4vL1xuLy8gXHQjZ2V0U29ydEtleShzdGF0ZSkge1xuLy8gXHRcdHJldHVybiB0aGlzLmFjdG9yLmdldEZsYWcoXCJmb3JiaWRkZW4tbGFuZHNcIiwgYCR7c3RhdGUgPz8gXCJub25lXCJ9LXNvcnRgKSB8fCBcIm5hbWVcIjtcbi8vIFx0fVxuLy9cbi8vIFx0I3NvcnRHZWFyKGEsIGIsIGtleSkge1xuLy8gXHRcdC8qIGVzbGludC1kaXNhYmxlIG5vLWNhc2UtZGVjbGFyYXRpb25zLCBuby1uZXN0ZWQtdGVybmFyeSAqL1xuLy8gXHRcdHN3aXRjaCAoa2V5KSB7XG4vLyBcdFx0XHRjYXNlIFwibmFtZVwiOlxuLy8gXHRcdFx0Y2FzZSBcInR5cGVcIjpcbi8vIFx0XHRcdFx0cmV0dXJuIGFba2V5XT8udG9Mb2NhbGVMb3dlckNhc2UoKS5sb2NhbGVDb21wYXJlKGJba2V5XT8udG9Mb2NhbGVMb3dlckNhc2UoKSkgPz8gMDtcbi8vIFx0XHRcdGNhc2UgXCJhdHRyaWJ1dGVcIjpcbi8vIFx0XHRcdFx0Y29uc3QgYUNvbXAgPSBhLnR5cGUgPT09IFwicmF3TWF0ZXJpYWxcIiA/IGEuc3lzdGVtLnF1YW50aXR5IDogYS5zeXN0ZW0uYm9udXMudmFsdWU7XG4vLyBcdFx0XHRcdGNvbnN0IGJDb21wID0gYi50eXBlID09PSBcInJhd01hdGVyaWFsXCIgPyBiLnN5c3RlbS5xdWFudGl0eSA6IGIuc3lzdGVtLmJvbnVzLnZhbHVlO1xuLy8gXHRcdFx0XHRyZXR1cm4gTnVtYmVyKGJDb21wKSAtIE51bWJlcihhQ29tcCk7XG4vLyBcdFx0XHRjYXNlIFwid2VpZ2h0XCI6XG4vLyBcdFx0XHRcdGNvbnN0IHdlaWdodE1hcCA9IENPTkZJRy5mYmwuZW5jdW1icmFuY2U7XG4vLyBcdFx0XHRcdGNvbnN0IGFXZWlnaHQgPVxuLy8gXHRcdFx0XHRcdGEudHlwZSA9PT0gXCJyYXdNYXRlcmlhbFwiID8gTnVtYmVyKGEuc3lzdGVtLnF1YW50aXR5KSA6IE1hdGguZmxvb3Iod2VpZ2h0TWFwW2Euc3lzdGVtLndlaWdodF0gfHwgMCk7XG4vLyBcdFx0XHRcdGNvbnN0IGJXZWlnaHQgPVxuLy8gXHRcdFx0XHRcdGIudHlwZSA9PT0gXCJyYXdNYXRlcmlhbFwiID8gTnVtYmVyKGIuc3lzdGVtLnF1YW50aXR5KSA6IE1hdGguZmxvb3Iod2VpZ2h0TWFwW2Iuc3lzdGVtLndlaWdodF0gfHwgMCk7XG4vLyBcdFx0XHRcdHJldHVybiBiV2VpZ2h0IC0gYVdlaWdodDtcbi8vIFx0XHR9XG4vLyBcdFx0LyogZXNsaW50LWVuYWJsZSBuby1jYXNlLWRlY2xhcmF0aW9ucywgbm8tbmVzdGVkLXRlcm5hcnkgKi9cbi8vIFx0fVxuLy9cbi8vIFx0I2ZpbHRlckdlYXIoaXRlbXMpIHtcbi8vIFx0XHRjb25zdCBmaWx0ZXJlZEl0ZW1zID0gaXRlbXNcbi8vIFx0XHRcdD8uZmlsdGVyKCh7IHR5cGUgfSkgPT4gQ09ORklHLmZibC5jYXJyaWVkSXRlbVR5cGVzLmluY2x1ZGVzKHR5cGUpKVxuLy8gXHRcdFx0Lm1hcCgoaXRlbSkgPT4gKHsgLi4uaXRlbSwgc3RhdGU6IGl0ZW0uZmxhZ3M/LnN0YXRlIHx8IFwibm9uZVwiIH0pKTtcbi8vIFx0XHRjb25zdCByZWR1Y2VkID0gZmlsdGVyZWRJdGVtcy5yZWR1Y2UoKGFjYywgaXRlbSkgPT4ge1xuLy8gXHRcdFx0Y29uc3QgeyBzdGF0ZSB9ID0gaXRlbTtcbi8vIFx0XHRcdGlmICghYWNjW3N0YXRlXSkgYWNjW3N0YXRlXSA9IFtdO1xuLy8gXHRcdFx0YWNjW3N0YXRlXS5wdXNoKGl0ZW0pO1xuLy8gXHRcdFx0cmV0dXJuIGFjYztcbi8vIFx0XHR9LCB7fSk7XG4vLyBcdFx0cmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhcbi8vIFx0XHRcdE9iamVjdC5lbnRyaWVzKHJlZHVjZWQpLm1hcCgoW2tleSwgYXJyXSkgPT4gW1xuLy8gXHRcdFx0XHRrZXksXG4vLyBcdFx0XHRcdGFyci5zb3J0KChhLCBiKSA9PiB0aGlzLiNzb3J0R2VhcihhLCBiLCB0aGlzLiNnZXRTb3J0S2V5KGtleSkpKSxcbi8vIFx0XHRcdF0pLFxuLy8gXHRcdCk7XG4vLyBcdH1cbi8vXG4vLyBcdCNvbkl0ZW1DcmVhdGUoZXZlbnQpIHtcbi8vIFx0XHRjb25zdCBpdGVtVHlwZSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YShcInR5cGVcIik7XG4vLyBcdFx0Y29uc3QgbGFiZWwgPSBDT05GSUcuZmJsLmkxOG5baXRlbVR5cGVdO1xuLy8gXHRcdHRoaXMuYWN0b3IuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoXG4vLyBcdFx0XHRcIkl0ZW1cIixcbi8vIFx0XHRcdHtcbi8vIFx0XHRcdFx0bmFtZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKGxhYmVsKX1gLFxuLy8gXHRcdFx0XHR0eXBlOiBpdGVtVHlwZSxcbi8vIFx0XHRcdH0sXG4vLyBcdFx0XHR7IHJlbmRlclNoZWV0OiB0cnVlIH0sXG4vLyBcdFx0KTtcbi8vIFx0fVxuLy9cbi8vIFx0YXN5bmMgI29uQ3JlYXRlRGlhbG9nKGV2ZW50KSB7XG4vLyBcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcbi8vIFx0XHRjb25zdCBzdGF0ZSA9ICQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KFwiW2RhdGEtc3RhdGVdXCIpPy5kYXRhKFwic3RhdGVcIik7XG4vLyBcdFx0SG9va3Mub25jZShcInJlbmRlckRpYWxvZ1wiLCAoXywgaHRtbCkgPT5cbi8vIFx0XHRcdGh0bWxcbi8vIFx0XHRcdFx0LmZpbmQoXCJvcHRpb25cIilcbi8vIFx0XHRcdFx0LmZpbHRlcigoX2ksIGVsKSA9PlxuLy8gXHRcdFx0XHRcdFtcbi8vIFx0XHRcdFx0XHRcdFwiY3JpdGljYWxJbmp1cnlcIixcbi8vIFx0XHRcdFx0XHRcdFwiYnVpbGRpbmdcIixcbi8vIFx0XHRcdFx0XHRcdFwiaGlyZWxpbmdcIixcbi8vIFx0XHRcdFx0XHRcdFwibW9uc3RlckF0dGFja1wiLFxuLy8gXHRcdFx0XHRcdFx0XCJtb25zdGVyVGFsZW50XCIsXG4vLyBcdFx0XHRcdFx0XHRcInNwZWxsXCIsXG4vLyBcdFx0XHRcdFx0XHRcInRhbGVudFwiLFxuLy8gXHRcdFx0XHRcdF0uaW5jbHVkZXMoZWwudmFsdWUpLFxuLy8gXHRcdFx0XHQpXG4vLyBcdFx0XHRcdC5yZW1vdmUoKSxcbi8vIFx0XHQpO1xuLy8gXHRcdGNvbnN0IGl0ZW0gPSBhd2FpdCBJdGVtLmNyZWF0ZURpYWxvZyh7fSwgeyBwYXJlbnQ6IHRoaXMuYWN0b3IgfSk7XG4vLyBcdFx0aWYgKGl0ZW0pIGl0ZW0uc2V0RmxhZyhcImZvcmJpZGRlbi1sYW5kc1wiLCBcInN0YXRlXCIsIHN0YXRlID09PSBcIm5vbmVcIiA/IFwiXCIgOiBzdGF0ZSk7XG4vLyBcdH1cbi8vIH1cbiIsICIvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuaW1wb3J0IHsgRmFidWxhVWx0aW1hSXRlbVNoZWV0IH0gZnJvbSBcIi4uL3NoZWV0LmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBGYWJ1bGFVbHRpbWFDbGFzc1NoZWV0IGV4dGVuZHMgRmFidWxhVWx0aW1hSXRlbVNoZWV0IHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucygpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFtcImZhYnVsYS11bHRpbWFcIiwgXCJzaGVldFwiLCBcIml0ZW1cIl0sXG4gICAgICB3aWR0aDogNjYwLFxuICAgICAgaGVpZ2h0OiA3NDAsXG4gICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgIH0pO1xuICB9XG5cbiAgZ2V0IHRlbXBsYXRlKCkge1xuICAgIHJldHVybiBcInN5c3RlbXMvZmFidWxhLXVsdGltYS90ZW1wbGF0ZXMvaXRlbS9jbGFzcy9zaGVldC5oYnNcIjtcbiAgfVxuICBhc3luYyBnZXREYXRhKCkge1xuICAgIGxldCBpdGVtRGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKTtcbiAgICByZXR1cm4gaXRlbURhdGE7XG4gIH1cbn1cbiIsICIvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuZXhwb3J0IGNsYXNzIEZhYnVsYVVsdGltYUl0ZW1TaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG59XG4iXSwKICAibWFwcGluZ3MiOiAiNklBQUEsbUhBQUMsOEVBQThFLDJFQUEyRSw0REFBNEQsc0RBQXNELEtDQTVRLG1JQ0FBLDBCQ0FBLDBCQUlBLElBQU0sYUFBZSxDQUFDLEVBNEJ0QixhQUFhLFdBQWEsQ0FBQyxZQUFhLFVBQVcsUUFBUyxXQUFXLEVBTXZFLGFBQWEsaUJBQW1CLENBQUUsR0FBSSxtQkFBb0IsSUFBSyxtQkFBb0IsRUFFbkYsYUFBYSxjQUFnQixDQUM1QixFQUFHLE1BQ0gsRUFBRyxNQUNILEVBQUcsT0FDSCxFQUFHLE1BQ0osRUFFQSxhQUFhLFdBQWEsQ0FBQyxRQUFTLFVBQVcsV0FBWSxTQUFVLE9BQVEsTUFBTSxFQUVuRixhQUFhLGNBQWdCLENBQzVCLEdBQUksWUFDTCxFQVlBLGFBQWEsS0FBTyxDQUNsQixVQUFXLHNCQUNYLFFBQVMsc0JBQ1QsTUFBTyxrQkFDUCxVQUFXLG1CQUNiLEVBaUZBLGFBQWEsVUFBWSxDQUN2QixPQUNBLE9BQ0YsRUF1REEsSUFBTyxlQUFRLGFDL01mLDBCQ0FBLDBCQUFlLFNBQVIsZUFBZ0MsT0FBUSxDQUN6QyxRQUFRLFFBQVEsSUFBSSxrQkFBa0IsRUFDM0MsR0FBSSxDQUVILElBQUksYUFEUyxPQUFPLGFBQWEsS0FDVCxNQUFNLEVBQzlCLE9BQUssZUFBYyxhQUFlLFFBRTNC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
